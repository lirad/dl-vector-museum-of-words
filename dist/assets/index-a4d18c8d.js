var Qr=Object.defineProperty,Jr=Object.defineProperties;var eo=Object.getOwnPropertyDescriptors;var kt=Object.getOwnPropertySymbols;var ln=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable;var es=Math.pow,an=(e,t,s)=>t in e?Qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,k=(e,t)=>{for(var s in t||(t={}))ln.call(t,s)&&an(e,s,t[s]);if(kt)for(var s of kt(t))cn.call(t,s)&&an(e,s,t[s]);return e},q=(e,t)=>Jr(e,eo(t));var pe=(e,t)=>{var s={};for(var n in e)ln.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&kt)for(var n of kt(e))t.indexOf(n)<0&&cn.call(e,n)&&(s[n]=e[n]);return s};var at=(e,t,s)=>new Promise((n,r)=>{var a=c=>{try{l(s.next(c))}catch(d){r(d)}},o=c=>{try{l(s.throw(c))}catch(d){r(d)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((s=s.apply(e,t)).next())});import{r as p,a as to,R as Ds}from"./vendor-2d4d72d8.js";import{P as ki,d as so}from"./math-413cc23e.js";import{M as Je,S as ts,L as Ge,a as ss,G as St,V as je,B as lt,b as ct,C as no,c as dn,d as io,e as et,P as ro,W as oo,R as ao,f as lo,A as co,D as un,g as hn,h as uo,i as ho,j as fn,k as mn}from"./three-5658389f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();var Si={exports:{}},Ut={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=p,mo=Symbol.for("react.element"),po=Symbol.for("react.fragment"),go=Object.prototype.hasOwnProperty,xo=fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yo={key:!0,ref:!0,__self:!0,__source:!0};function Ci(e,t,s){var n,r={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)go.call(t,n)&&!yo.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:mo,type:e,key:a,ref:o,props:r,_owner:xo.current}}Ut.Fragment=po;Ut.jsx=Ci;Ut.jsxs=Ci;Si.exports=Ut;var i=Si.exports,xs={},pn=to;xs.createRoot=pn.createRoot,xs.hydrateRoot=pn.hydrateRoot;const vo="modulepreload",bo=function(e){return"/"+e},gn={},jo=function(t,s,n){if(!s||s.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=bo(a),a in gn)return;gn[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":vo,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},Ni=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Wt=p.createContext({}),Gt=p.createContext(null),Ht=typeof document!="undefined",Ls=Ht?p.useLayoutEffect:p.useEffect,Mi=p.createContext({strict:!1}),Es=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),wo="framerAppearId",Ai="data-"+Es(wo);function Po(e,t,s,n){const{visualElement:r}=p.useContext(Wt),a=p.useContext(Mi),o=p.useContext(Gt),l=p.useContext(Ni).reducedMotion,c=p.useRef();n=n||a.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:r,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;p.useInsertionEffect(()=>{d&&d.update(s,o)});const u=p.useRef(!!(s[Ai]&&!window.HandoffComplete));return Ls(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),p.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function tt(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function To(e,t,s){return p.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):tt(s)&&(s.current=n))},[t])}function xt(e){return typeof e=="string"||Array.isArray(e)}function _t(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Rs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fs=["initial",...Rs];function qt(e){return _t(e.animate)||Fs.some(t=>xt(e[t]))}function Vi(e){return!!(qt(e)||e.variants)}function ko(e,t){if(qt(e)){const{initial:s,animate:n}=e;return{initial:s===!1||xt(s)?s:void 0,animate:xt(n)?n:void 0}}return e.inherit!==!1?t:{}}function So(e){const{initial:t,animate:s}=ko(e,p.useContext(Wt));return p.useMemo(()=>({initial:t,animate:s}),[xn(t),xn(s)])}function xn(e){return Array.isArray(e)?e.join(" "):e}const yn={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yt={};for(const e in yn)yt[e]={isEnabled:t=>yn[e].some(s=>!!t[s])};function Co(e){for(const t in e)yt[t]=k(k({},yt[t]),e[t])}const Bs=p.createContext({}),Di=p.createContext({}),No=Symbol.for("motionComponentSymbol");function Mo({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:r}){e&&Co(e);function a(l,c){let d;const u=q(k(k({},p.useContext(Ni)),l),{layoutId:Ao(l)}),{isStatic:h}=u,f=So(l),m=n(l,h);if(!h&&Ht){f.visualElement=Po(r,m,u,t);const y=p.useContext(Di),g=p.useContext(Mi).strict;f.visualElement&&(d=f.visualElement.loadFeatures(u,g,e,y))}return p.createElement(Wt.Provider,{value:f},d&&f.visualElement?p.createElement(d,k({visualElement:f.visualElement},u)):null,s(r,l,To(m,f.visualElement,c),m,h,f.visualElement))}const o=p.forwardRef(a);return o[No]=r,o}function Ao({layoutId:e}){const t=p.useContext(Bs).id;return t&&e!==void 0?t+"-"+e:e}function Vo(e){function t(n,r={}){return Mo(e(n,r))}if(typeof Proxy=="undefined")return t;const s=new Map;return new Proxy(t,{get:(n,r)=>(s.has(r)||s.set(r,t(r)),s.get(r))})}const Do=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zs(e){return typeof e!="string"||e.includes("-")?!1:!!(Do.indexOf(e)>-1||/[A-Z]/.test(e))}const Et={};function Lo(e){Object.assign(Et,e)}const bt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ye=new Set(bt);function Li(e,{layout:t,layoutId:s}){return Ye.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Et[e]||e==="opacity")}const be=e=>!!(e&&e.getVelocity),Eo={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ro=bt.length;function Fo(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},n,r){let a="";for(let o=0;o<Ro;o++){const l=bt[o];if(e[l]!==void 0){const c=Eo[l]||l;a+=`${c}(${e[l]}) `}}return t&&!e.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(e,n?"":a):s&&n&&(a="none"),a}const Ei=e=>t=>typeof t=="string"&&t.startsWith(e),Ri=Ei("--"),ys=Ei("var(--"),Bo=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,zo=(e,t)=>t&&typeof e=="number"?t.transform(e):e,$e=(e,t,s)=>Math.min(Math.max(s,e),t),Ze={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ft=q(k({},Ze),{transform:e=>$e(0,1,e)}),Ct=q(k({},Ze),{default:1}),mt=e=>Math.round(e*1e5)/1e5,Kt=/(-)?([\d]*\.?[\d])+/g,Fi=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Io=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function jt(e){return typeof e=="string"}const wt=e=>({test:t=>jt(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Be=wt("deg"),Ne=wt("%"),B=wt("px"),Oo=wt("vh"),$o=wt("vw"),vn=q(k({},Ne),{parse:e=>Ne.parse(e)/100,transform:e=>Ne.transform(e*100)}),bn=q(k({},Ze),{transform:Math.round}),Bi={borderWidth:B,borderTopWidth:B,borderRightWidth:B,borderBottomWidth:B,borderLeftWidth:B,borderRadius:B,radius:B,borderTopLeftRadius:B,borderTopRightRadius:B,borderBottomRightRadius:B,borderBottomLeftRadius:B,width:B,maxWidth:B,height:B,maxHeight:B,size:B,top:B,right:B,bottom:B,left:B,padding:B,paddingTop:B,paddingRight:B,paddingBottom:B,paddingLeft:B,margin:B,marginTop:B,marginRight:B,marginBottom:B,marginLeft:B,rotate:Be,rotateX:Be,rotateY:Be,rotateZ:Be,scale:Ct,scaleX:Ct,scaleY:Ct,scaleZ:Ct,skew:Be,skewX:Be,skewY:Be,distance:B,translateX:B,translateY:B,translateZ:B,x:B,y:B,z:B,perspective:B,transformPerspective:B,opacity:ft,originX:vn,originY:vn,originZ:B,zIndex:bn,fillOpacity:ft,strokeOpacity:ft,numOctaves:bn};function Is(e,t,s,n){const{style:r,vars:a,transform:o,transformOrigin:l}=e;let c=!1,d=!1,u=!0;for(const h in t){const f=t[h];if(Ri(h)){a[h]=f;continue}const m=Bi[h],y=zo(f,m);if(Ye.has(h)){if(c=!0,o[h]=y,!u)continue;f!==(m.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=y):r[h]=y}if(t.transform||(c||n?r.transform=Fo(e.transform,s,u,n):r.transform&&(r.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;r.transformOrigin=`${h} ${f} ${m}`}}const Os=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zi(e,t,s){for(const n in t)!be(t[n])&&!Li(n,s)&&(e[n]=t[n])}function Uo({transformTemplate:e},t,s){return p.useMemo(()=>{const n=Os();return Is(n,t,{enableHardwareAcceleration:!s},e),Object.assign({},n.vars,n.style)},[t])}function Wo(e,t,s){const n=e.style||{},r={};return zi(r,n,e),Object.assign(r,Uo(e,t,s)),e.transformValues?e.transformValues(r):r}function Go(e,t,s){const n={},r=Wo(e,t,s);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ho=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rt(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ho.has(e)}let Ii=e=>!Rt(e);function _o(e){e&&(Ii=t=>t.startsWith("on")?!Rt(t):e(t))}try{_o(require("@emotion/is-prop-valid").default)}catch(e){}function qo(e,t,s){const n={};for(const r in e)r==="values"&&typeof e.values=="object"||(Ii(r)||s===!0&&Rt(r)||!t&&!Rt(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}function jn(e,t,s){return typeof e=="string"?e:B.transform(t+s*e)}function Ko(e,t,s){const n=jn(t,e.x,e.width),r=jn(s,e.y,e.height);return`${n} ${r}`}const Xo={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yo={offset:"strokeDashoffset",array:"strokeDasharray"};function Zo(e,t,s=1,n=0,r=!0){e.pathLength=1;const a=r?Xo:Yo;e[a.offset]=B.transform(-n);const o=B.transform(t),l=B.transform(s);e[a.array]=`${o} ${l}`}function $s(e,m,u,h,f){var y=m,{attrX:t,attrY:s,attrScale:n,originX:r,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0}=y,d=pe(y,["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"]);if(Is(e,d,u,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:P,dimensions:w}=e;g.transform&&(w&&(P.transform=g.transform),delete g.transform),w&&(r!==void 0||a!==void 0||P.transform)&&(P.transformOrigin=Ko(w,r!==void 0?r:.5,a!==void 0?a:.5)),t!==void 0&&(g.x=t),s!==void 0&&(g.y=s),n!==void 0&&(g.scale=n),o!==void 0&&Zo(g,o,l,c,!1)}const Oi=()=>q(k({},Os()),{attrs:{}}),Us=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Qo(e,t,s,n){const r=p.useMemo(()=>{const a=Oi();return $s(a,t,{enableHardwareAcceleration:!1},Us(n),e.transformTemplate),q(k({},a.attrs),{style:k({},a.style)})},[t]);if(e.style){const a={};zi(a,e.style,e),r.style=k(k({},a),r.style)}return r}function Jo(e=!1){return(s,n,r,{latestValues:a},o)=>{const c=(zs(s)?Qo:Go)(n,a,o,s),d=qo(n,typeof s=="string",e),u=q(k(k({},d),c),{ref:r}),{children:h}=n,f=p.useMemo(()=>be(h)?h.get():h,[h]);return p.createElement(s,q(k({},u),{children:f}))}}function $i(e,{style:t,vars:s},n,r){Object.assign(e.style,t,r&&r.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}const Ui=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wi(e,t,s,n){$i(e,t,void 0,n);for(const r in t.attrs)e.setAttribute(Ui.has(r)?r:Es(r),t.attrs[r])}function Ws(e,t){const{style:s}=e,n={};for(const r in s)(be(s[r])||t.style&&be(t.style[r])||Li(r,e))&&(n[r]=s[r]);return n}function Gi(e,t){const s=Ws(e,t);for(const n in e)if(be(e[n])||be(t[n])){const r=bt.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[r]=e[n]}return s}function Gs(e,t,s,n={},r={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,r)),t}function Hi(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ft=e=>Array.isArray(e),ea=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),ta=e=>Ft(e)?e[e.length-1]||0:e;function Dt(e){const t=be(e)?e.get():e;return ea(t)?t.toValue():t}function sa({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},n,r,a){const o={latestValues:na(n,r,a,e),renderState:t()};return s&&(o.mount=l=>s(n,l,o)),o}const _i=e=>(t,s)=>{const n=p.useContext(Wt),r=p.useContext(Gt),a=()=>sa(e,t,n,r);return s?a():Hi(a)};function na(e,t,s,n){const r={},a=n(e,{});for(const f in a)r[f]=Dt(a[f]);let{initial:o,animate:l}=e;const c=qt(e),d=Vi(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!_t(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const y=Gs(e,m);if(!y)return;const v=y,{transitionEnd:g,transition:P}=v,w=pe(v,["transitionEnd","transition"]);for(const x in w){let T=w[x];if(Array.isArray(T)){const S=u?T.length-1:0;T=T[S]}T!==null&&(r[x]=T)}for(const x in g)r[x]=g[x]}),r}const oe=e=>e;class wn{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ia(e){let t=new wn,s=new wn,n=0,r=!1,a=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&r,f=h?t:s;return d&&o.add(c),f.add(c)&&h&&r&&(n=t.order.length),c},cancel:c=>{s.remove(c),o.delete(c)},process:c=>{if(r){a=!0;return}if(r=!0,[t,s]=[s,t],s.clear(),n=t.order.length,n)for(let d=0;d<n;d++){const u=t.order[d];u(c),o.has(u)&&(l.schedule(u),e())}r=!1,a&&(a=!1,l.process(c))}};return l}const Nt=["prepare","read","update","preRender","render","postRender"],ra=40;function oa(e,t){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=Nt.reduce((h,f)=>(h[f]=ia(()=>s=!0),h),{}),o=h=>a[h].process(r),l=()=>{const h=performance.now();s=!1,r.delta=n?1e3/60:Math.max(Math.min(h-r.timestamp,ra),1),r.timestamp=h,r.isProcessing=!0,Nt.forEach(o),r.isProcessing=!1,s&&t&&(n=!1,e(l))},c=()=>{s=!0,n=!0,r.isProcessing||e(l)};return{schedule:Nt.reduce((h,f)=>{const m=a[f];return h[f]=(y,g=!1,P=!1)=>(s||c(),m.schedule(y,g,P)),h},{}),cancel:h=>Nt.forEach(f=>a[f].cancel(h)),state:r,steps:a}}const{schedule:Q,cancel:Ee,state:ge,steps:ns}=oa(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:oe,!0),aa={useVisualState:_i({scrapeMotionValuesFromProps:Gi,createRenderState:Oi,onMount:(e,t,{renderState:s,latestValues:n})=>{Q.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(r){s.dimensions={x:0,y:0,width:0,height:0}}}),Q.render(()=>{$s(s,n,{enableHardwareAcceleration:!1},Us(t.tagName),e.transformTemplate),Wi(t,s)})}})},la={useVisualState:_i({scrapeMotionValuesFromProps:Ws,createRenderState:Os})};function ca(e,{forwardMotionProps:t=!1},s,n){const r=zs(e)?aa:la;return q(k({},r),{preloadedFeatures:s,useRender:Jo(t),createVisualElement:n,Component:e})}function Ve(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const qi=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Xt(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const da=e=>t=>qi(t)&&e(t,Xt(t));function De(e,t,s,n){return Ve(e,t,da(s),n)}const ua=(e,t)=>s=>t(e(s)),Ie=(...e)=>e.reduce(ua);function Ki(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const Pn=Ki("dragHorizontal"),Tn=Ki("dragVertical");function Xi(e){let t=!1;if(e==="y")t=Tn();else if(e==="x")t=Pn();else{const s=Pn(),n=Tn();s&&n?t=()=>{s(),n()}:(s&&s(),n&&n())}return t}function Yi(){const e=Xi(!0);return e?(e(),!1):!0}class We{constructor(t){this.isMounted=!1,this.node=t}update(){}}function kn(e,t){const s="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),r=(a,o)=>{if(a.pointerType==="touch"||Yi())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Q.update(()=>l[n](a,o))};return De(e.current,s,r,{passive:!e.getProps()[n]})}class ha extends We{mount(){this.unmount=Ie(kn(this.node,!0),kn(this.node,!1))}unmount(){}}class fa extends We{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(s){t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ie(Ve(this.node.current,"focus",()=>this.onFocus()),Ve(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Zi=(e,t)=>t?e===t?!0:Zi(e,t.parentElement):!1;function is(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,Xt(s))}class ma extends We{constructor(){super(...arguments),this.removeStartListeners=oe,this.removeEndListeners=oe,this.removeAccessibleListeners=oe,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),a=De(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Q.update(()=>{!h&&!Zi(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=De(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ie(a,o),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||is("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&Q.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Ve(this.node.current,"keyup",o),is("down",(l,c)=>{this.startPress(l,c)})},s=Ve(this.node.current,"keydown",t),n=()=>{this.isPressing&&is("cancel",(a,o)=>this.cancelPress(a,o))},r=Ve(this.node.current,"blur",n);this.removeAccessibleListeners=Ie(s,r)}}startPress(t,s){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Q.update(()=>n(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Yi()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Q.update(()=>n(t,s))}mount(){const t=this.node.getProps(),s=De(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Ve(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ie(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const vs=new WeakMap,rs=new WeakMap,pa=e=>{const t=vs.get(e.target);t&&t(e)},ga=e=>{e.forEach(pa)};function xa(s){var n=s,{root:e}=n,t=pe(n,["root"]);const r=e||document;rs.has(r)||rs.set(r,{});const a=rs.get(r),o=JSON.stringify(t);return a[o]||(a[o]=new IntersectionObserver(ga,k({root:e},t))),a[o]}function ya(e,t,s){const n=xa(t);return vs.set(e,s),n.observe(e),()=>{vs.delete(e),n.unobserve(e)}}const va={some:0,all:1};class ba extends We{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:va[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return ya(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(ja(t,s))&&this.startObserver()}unmount(){}}function ja({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const wa={inView:{Feature:ba},tap:{Feature:ma},focus:{Feature:fa},hover:{Feature:ha}};function Qi(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function Pa(e){const t={};return e.values.forEach((s,n)=>t[n]=s.get()),t}function Ta(e){const t={};return e.values.forEach((s,n)=>t[n]=s.getVelocity()),t}function Yt(e,t,s){const n=e.getProps();return Gs(n,t,s!==void 0?s:n.custom,Pa(e),Ta(e))}let ka=oe,Hs=oe;const Oe=e=>e*1e3,Le=e=>e/1e3,Sa={current:!1},Ji=e=>Array.isArray(e)&&typeof e[0]=="number";function er(e){return!!(!e||typeof e=="string"&&tr[e]||Ji(e)||Array.isArray(e)&&e.every(er))}const ht=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,tr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ht([0,.65,.55,1]),circOut:ht([.55,0,1,.45]),backIn:ht([.31,.01,.66,-.59]),backOut:ht([.33,1.53,.69,.99])};function sr(e){if(e)return Ji(e)?ht(e):Array.isArray(e)?e.map(sr):tr[e]}function Ca(e,t,s,{delay:n=0,duration:r,repeat:a=0,repeatType:o="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const u=sr(l);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:n,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function Na(e,{repeat:t,repeatType:s="loop"}){const n=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[n]}const nr=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,Ma=1e-7,Aa=12;function Va(e,t,s,n,r){let a,o,l=0;do o=t+(s-t)/2,a=nr(o,n,r)-e,a>0?s=o:t=o;while(Math.abs(a)>Ma&&++l<Aa);return o}function Pt(e,t,s,n){if(e===t&&s===n)return oe;const r=a=>Va(a,0,1,e,s);return a=>a===0||a===1?a:nr(r(a),t,n)}const Da=Pt(.42,0,1,1),La=Pt(0,0,.58,1),ir=Pt(.42,0,.58,1),Ea=e=>Array.isArray(e)&&typeof e[0]!="number",rr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,or=e=>t=>1-e(1-t),_s=e=>1-Math.sin(Math.acos(e)),ar=or(_s),Ra=rr(_s),lr=Pt(.33,1.53,.69,.99),qs=or(lr),Fa=rr(qs),Ba=e=>(e*=2)<1?.5*qs(e):.5*(2-Math.pow(2,-10*(e-1))),za={linear:oe,easeIn:Da,easeInOut:ir,easeOut:La,circIn:_s,circInOut:Ra,circOut:ar,backIn:qs,backInOut:Fa,backOut:lr,anticipate:Ba},Sn=e=>{if(Array.isArray(e)){Hs(e.length===4);const[t,s,n,r]=e;return Pt(t,s,n,r)}else if(typeof e=="string")return za[e];return e},Ks=(e,t)=>s=>!!(jt(s)&&Io.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),cr=(e,t,s)=>n=>{if(!jt(n))return n;const[r,a,o,l]=n.match(Kt);return{[e]:parseFloat(r),[t]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Ia=e=>$e(0,255,e),os=q(k({},Ze),{transform:e=>Math.round(Ia(e))}),Xe={test:Ks("rgb","red"),parse:cr("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+os.transform(e)+", "+os.transform(t)+", "+os.transform(s)+", "+mt(ft.transform(n))+")"};function Oa(e){let t="",s="",n="",r="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,s+=s,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const bs={test:Ks("#"),parse:Oa,transform:Xe.transform},st={test:Ks("hsl","hue"),parse:cr("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ne.transform(mt(t))+", "+Ne.transform(mt(s))+", "+mt(ft.transform(n))+")"},ye={test:e=>Xe.test(e)||bs.test(e)||st.test(e),parse:e=>Xe.test(e)?Xe.parse(e):st.test(e)?st.parse(e):bs.parse(e),transform:e=>jt(e)?e:e.hasOwnProperty("red")?Xe.transform(e):st.transform(e)},ie=(e,t,s)=>-s*e+s*t+e;function as(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function $a({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let r=0,a=0,o=0;if(!t)r=a=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;r=as(c,l,e+1/3),a=as(c,l,e),o=as(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const ls=(e,t,s)=>{const n=e*e;return Math.sqrt(Math.max(0,s*(t*t-n)+n))},Ua=[bs,Xe,st],Wa=e=>Ua.find(t=>t.test(e));function Cn(e){const t=Wa(e);let s=t.parse(e);return t===st&&(s=$a(s)),s}const dr=(e,t)=>{const s=Cn(e),n=Cn(t),r=k({},s);return a=>(r.red=ls(s.red,n.red,a),r.green=ls(s.green,n.green,a),r.blue=ls(s.blue,n.blue,a),r.alpha=ie(s.alpha,n.alpha,a),Xe.transform(r))};function Ga(e){var t,s;return isNaN(e)&&jt(e)&&(((t=e.match(Kt))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(Fi))===null||s===void 0?void 0:s.length)||0)>0}const ur={regex:Bo,countKey:"Vars",token:"${v}",parse:oe},hr={regex:Fi,countKey:"Colors",token:"${c}",parse:ye.parse},fr={regex:Kt,countKey:"Numbers",token:"${n}",parse:Ze.parse};function cs(e,{regex:t,countKey:s,token:n,parse:r}){const a=e.tokenised.match(t);a&&(e["num"+s]=a.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...a.map(r)))}function Bt(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&cs(s,ur),cs(s,hr),cs(s,fr),s}function mr(e){return Bt(e).values}function pr(e){const{values:t,numColors:s,numVars:n,tokenised:r}=Bt(e),a=t.length;return o=>{let l=r;for(let c=0;c<a;c++)c<n?l=l.replace(ur.token,o[c]):c<n+s?l=l.replace(hr.token,ye.transform(o[c])):l=l.replace(fr.token,mt(o[c]));return l}}const Ha=e=>typeof e=="number"?0:e;function _a(e){const t=mr(e);return pr(e)(t.map(Ha))}const Ue={test:Ga,parse:mr,createTransformer:pr,getAnimatableNone:_a},gr=(e,t)=>s=>`${s>0?t:e}`;function xr(e,t){return typeof e=="number"?s=>ie(e,t,s):ye.test(e)?dr(e,t):e.startsWith("var(")?gr(e,t):vr(e,t)}const yr=(e,t)=>{const s=[...e],n=s.length,r=e.map((a,o)=>xr(a,t[o]));return a=>{for(let o=0;o<n;o++)s[o]=r[o](a);return s}},qa=(e,t)=>{const s=k(k({},e),t),n={};for(const r in s)e[r]!==void 0&&t[r]!==void 0&&(n[r]=xr(e[r],t[r]));return r=>{for(const a in n)s[a]=n[a](r);return s}},vr=(e,t)=>{const s=Ue.createTransformer(t),n=Bt(e),r=Bt(t);return n.numVars===r.numVars&&n.numColors===r.numColors&&n.numNumbers>=r.numNumbers?Ie(yr(n.values,r.values),s):gr(e,t)},vt=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},Nn=(e,t)=>s=>ie(e,t,s);function Ka(e){return typeof e=="number"?Nn:typeof e=="string"?ye.test(e)?dr:vr:Array.isArray(e)?yr:typeof e=="object"?qa:Nn}function Xa(e,t,s){const n=[],r=s||Ka(e[0]),a=e.length-1;for(let o=0;o<a;o++){let l=r(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||oe:t;l=Ie(c,l)}n.push(l)}return n}function br(e,t,{clamp:s=!0,ease:n,mixer:r}={}){const a=e.length;if(Hs(a===t.length),a===1)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Xa(t,n,r),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=vt(e[u],e[u+1],d);return o[u](h)};return s?d=>c($e(e[0],e[a-1],d)):c}function Ya(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const r=vt(0,t,n);e.push(ie(s,1,r))}}function Za(e){const t=[0];return Ya(t,e.length-1),t}function Qa(e,t){return e.map(s=>s*t)}function Ja(e,t){return e.map(()=>t||ir).splice(0,e.length-1)}function zt({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const r=Ea(n)?n.map(Sn):Sn(n),a={done:!1,value:t[0]},o=Qa(s&&s.length===t.length?s:Za(t),e),l=br(o,t,{ease:Array.isArray(r)?r:Ja(t,r)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}function jr(e,t){return t?e*(1e3/t):0}const el=5;function wr(e,t,s){const n=Math.max(t-el,0);return jr(s-e(n),t-n)}const ds=.001,tl=.01,Mn=10,sl=.05,nl=1;function il({duration:e=800,bounce:t=.25,velocity:s=0,mass:n=1}){let r,a;ka(e<=Oe(Mn));let o=1-t;o=$e(sl,nl,o),e=$e(tl,Mn,Le(e)),o<1?(r=d=>{const u=d*o,h=u*e,f=u-s,m=js(d,o),y=Math.exp(-h);return ds-f/m*y},a=d=>{const h=d*o*e,f=h*s+s,m=Math.pow(o,2)*Math.pow(d,2)*e,y=Math.exp(-h),g=js(Math.pow(d,2),o);return(-r(d)+ds>0?-1:1)*((f-m)*y)/g}):(r=d=>{const u=Math.exp(-d*e),h=(d-s)*e+1;return-ds+u*h},a=d=>{const u=Math.exp(-d*e),h=(s-d)*(e*e);return u*h});const l=5/e,c=ol(r,a,l);if(e=Oe(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:e}}}const rl=12;function ol(e,t,s){let n=s;for(let r=1;r<rl;r++)n=n-e(n)/t(n);return n}function js(e,t){return e*Math.sqrt(1-t*t)}const al=["duration","bounce"],ll=["stiffness","damping","mass"];function An(e,t){return t.some(s=>e[s]!==void 0)}function cl(e){let t=k({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!An(e,ll)&&An(e,al)){const s=il(e);t=q(k(k({},t),s),{mass:1}),t.isResolvedFromDuration=!0}return t}function Pr(r){var a=r,{keyframes:e,restDelta:t,restSpeed:s}=a,n=pe(a,["keyframes","restDelta","restSpeed"]);const o=e[0],l=e[e.length-1],c={done:!1,value:o},{stiffness:d,damping:u,mass:h,duration:f,velocity:m,isResolvedFromDuration:y}=cl(q(k({},n),{velocity:-Le(n.velocity||0)})),g=m||0,P=u/(2*Math.sqrt(d*h)),w=l-o,v=Le(Math.sqrt(d/h)),x=Math.abs(w)<5;s||(s=x?.01:2),t||(t=x?.005:.5);let T;if(P<1){const S=js(v,P);T=R=>{const L=Math.exp(-P*v*R);return l-L*((g+P*v*w)/S*Math.sin(S*R)+w*Math.cos(S*R))}}else if(P===1)T=S=>l-Math.exp(-v*S)*(w+(g+v*w)*S);else{const S=v*Math.sqrt(P*P-1);T=R=>{const L=Math.exp(-P*v*R),M=Math.min(S*R,300);return l-L*((g+P*v*w)*Math.sinh(M)+S*w*Math.cosh(M))/S}}return{calculatedDuration:y&&f||null,next:S=>{const R=T(S);if(y)c.done=S>=f;else{let L=g;S!==0&&(P<1?L=wr(T,S,R):L=0);const M=Math.abs(L)<=s,O=Math.abs(l-R)<=t;c.done=M&&O}return c.value=c.done?l:R,c}}}function Vn({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},m=M=>l!==void 0&&M<l||c!==void 0&&M>c,y=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let g=s*t;const P=h+g,w=o===void 0?P:o(P);w!==P&&(g=w-h);const v=M=>-g*Math.exp(-M/n),x=M=>w+v(M),T=M=>{const O=v(M),J=x(M);f.done=Math.abs(O)<=d,f.value=f.done?w:J};let S,R;const L=M=>{m(f.value)&&(S=M,R=Pr({keyframes:[f.value,y(f.value)],velocity:wr(x,M,f.value),damping:r,stiffness:a,restDelta:d,restSpeed:u}))};return L(0),{calculatedDuration:null,next:M=>{let O=!1;return!R&&S===void 0&&(O=!0,T(M),L(M)),S!==void 0&&M>S?R.next(M-S):(!O&&T(M),f)}}}const dl=e=>{const t=({timestamp:s})=>e(s);return{start:()=>Q.update(t,!0),stop:()=>Ee(t),now:()=>ge.isProcessing?ge.timestamp:performance.now()}},Dn=2e4;function Ln(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<Dn;)t+=s,n=e.next(t);return t>=Dn?1/0:t}const ul={decay:Vn,inertia:Vn,tween:zt,keyframes:zt,spring:Pr};function It(m){var y=m,{autoplay:e=!0,delay:t=0,driver:s=dl,keyframes:n,type:r="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h}=y,f=pe(y,["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"]);let g=1,P=!1,w,v;const x=()=>{v=new Promise(C=>{w=C})};x();let T;const S=ul[r]||zt;let R;S!==zt&&typeof n[0]!="number"&&(R=br([0,100],n,{clamp:!1}),n=[0,100]);const L=S(q(k({},f),{keyframes:n}));let M;l==="mirror"&&(M=S(q(k({},f),{keyframes:[...n].reverse(),velocity:-(f.velocity||0)})));let O="idle",J=null,ee=null,ve=null;L.calculatedDuration===null&&a&&(L.calculatedDuration=Ln(L));const{calculatedDuration:xe}=L;let Ce=1/0,fe=1/0;xe!==null&&(Ce=xe+o,fe=Ce*(a+1)-o);let K=0;const ae=C=>{if(ee===null)return;g>0&&(ee=Math.min(ee,C)),g<0&&(ee=Math.min(C-fe/g,ee)),J!==null?K=J:K=Math.round(C-ee)*g;const D=K-t*(g>=0?1:-1),V=g>=0?D<0:D>fe;K=Math.max(D,0),O==="finished"&&J===null&&(K=fe);let H=K,Y=L;if(a){const U=Math.min(K,fe)/Ce;let le=Math.floor(U),te=U%1;!te&&U>=1&&(te=1),te===1&&le--,le=Math.min(le,a+1),!!(le%2)&&(l==="reverse"?(te=1-te,o&&(te-=o/Ce)):l==="mirror"&&(Y=M)),H=$e(0,1,te)*Ce}const _=V?{done:!1,value:n[0]}:Y.next(H);R&&(_.value=R(_.value));let{done:$}=_;!V&&xe!==null&&($=g>=0?K>=fe:K<=0);const ne=J===null&&(O==="finished"||O==="running"&&$);return h&&h(_.value),ne&&Z(),_},z=()=>{T&&T.stop(),T=void 0},b=()=>{O="idle",z(),w(),x(),ee=ve=null},Z=()=>{O="finished",u&&u(),z(),w()},W=()=>{if(P)return;T||(T=s(ae));const C=T.now();c&&c(),J!==null?ee=C-J:(!ee||O==="finished")&&(ee=C),O==="finished"&&x(),ve=ee,J=null,O="running",T.start()};e&&W();const A={then(C,D){return v.then(C,D)},get time(){return Le(K)},set time(C){C=Oe(C),K=C,J!==null||!T||g===0?J=C:ee=T.now()-C/g},get duration(){const C=L.calculatedDuration===null?Ln(L):L.calculatedDuration;return Le(C)},get speed(){return g},set speed(C){C===g||!T||(g=C,A.time=Le(K))},get state(){return O},play:W,pause:()=>{O="paused",J=K},stop:()=>{P=!0,O!=="idle"&&(O="idle",d&&d(),b())},cancel:()=>{ve!==null&&ae(ve),b()},complete:()=>{O="finished"},sample:C=>(ee=0,ae(C))};return A}function hl(e){let t;return()=>(t===void 0&&(t=e()),t)}const fl=hl(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ml=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Mt=10,pl=2e4,gl=(e,t)=>t.type==="spring"||e==="backgroundColor"||!er(t.ease);function xl(e,t,a){var o=a,{onUpdate:s,onComplete:n}=o,r=pe(o,["onUpdate","onComplete"]);if(!(fl()&&ml.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let c=!1,d,u,h=!1;const f=()=>{u=new Promise(S=>{d=S})};f();let{keyframes:m,duration:y=300,ease:g,times:P}=r;if(gl(t,r)){const S=It(q(k({},r),{repeat:0,delay:0}));let R={done:!1,value:m[0]};const L=[];let M=0;for(;!R.done&&M<pl;)R=S.sample(M),L.push(R.value),M+=Mt;P=void 0,m=L,y=M-Mt,g="linear"}const w=Ca(e.owner.current,t,m,q(k({},r),{duration:y,ease:g,times:P})),v=()=>{h=!1,w.cancel()},x=()=>{h=!0,Q.update(v),d(),f()};return w.onfinish=()=>{h||(e.set(Na(m,r)),n&&n(),x())},{then(S,R){return u.then(S,R)},attachTimeline(S){return w.timeline=S,w.onfinish=null,oe},get time(){return Le(w.currentTime||0)},set time(S){w.currentTime=Oe(S)},get speed(){return w.playbackRate},set speed(S){w.playbackRate=S},get duration(){return Le(y)},play:()=>{c||(w.play(),Ee(v))},pause:()=>w.pause(),stop:()=>{if(c=!0,w.playState==="idle")return;const{currentTime:S}=w;if(S){const R=It(q(k({},r),{autoplay:!1}));e.setWithVelocity(R.sample(S-Mt).value,R.sample(S).value,Mt)}x()},complete:()=>{h||w.finish()},cancel:x}}function yl({keyframes:e,delay:t,onUpdate:s,onComplete:n}){const r=()=>(s&&s(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:oe,pause:oe,stop:oe,then:a=>(a(),Promise.resolve()),cancel:oe,complete:oe});return t?It({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const vl={type:"spring",stiffness:500,damping:25,restSpeed:10},bl=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),jl={type:"keyframes",duration:.8},wl={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pl=(e,{keyframes:t})=>t.length>2?jl:Ye.has(e)?e.startsWith("scale")?bl(t[1]):vl:wl,ws=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ue.test(t)||t==="0")&&!t.startsWith("url(")),Tl=new Set(["brightness","contrast","saturate","opacity"]);function kl(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Kt)||[];if(!n)return e;const r=s.replace(n,"");let a=Tl.has(t)?1:0;return n!==s&&(a*=100),t+"("+a+r+")"}const Sl=/([a-z-]*)\(.*?\)/g,Ps=q(k({},Ue),{getAnimatableNone:e=>{const t=e.match(Sl);return t?t.map(kl).join(" "):e}}),Cl=q(k({},Bi),{color:ye,backgroundColor:ye,outlineColor:ye,fill:ye,stroke:ye,borderColor:ye,borderTopColor:ye,borderRightColor:ye,borderBottomColor:ye,borderLeftColor:ye,filter:Ps,WebkitFilter:Ps}),Xs=e=>Cl[e];function Tr(e,t){let s=Xs(e);return s!==Ps&&(s=Ue),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const kr=e=>/^0[^.\s]+$/.test(e);function Nl(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||kr(e)}function Ml(e,t,s,n){const r=ws(t,s);let a;Array.isArray(s)?a=[...s]:a=[null,s];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let d=0;d<a.length;d++)a[d]===null&&(a[d]=d===0?o:a[d-1]),Nl(a[d])&&c.push(d),typeof a[d]=="string"&&a[d]!=="none"&&a[d]!=="0"&&(l=a[d]);if(r&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];a[u]=Tr(t,l)}return a}function Al(h){var f=h,{when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d}=f,u=pe(f,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(u).length}function Ys(e,t){return e[t]||e.default||e}const Vl={skipAnimations:!1},Zs=(e,t,s,n={})=>r=>{const a=Ys(n,e)||{},o=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Oe(o);const c=Ml(t,e,s,a),d=c[0],u=c[c.length-1],h=ws(e,d),f=ws(e,u);let m=q(k({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},a),{delay:-l,onUpdate:y=>{t.set(y),a.onUpdate&&a.onUpdate(y)},onComplete:()=>{r(),a.onComplete&&a.onComplete()}});if(Al(a)||(m=k(k({},m),Pl(e,m))),m.duration&&(m.duration=Oe(m.duration)),m.repeatDelay&&(m.repeatDelay=Oe(m.repeatDelay)),!h||!f||Sa.current||a.type===!1||Vl.skipAnimations)return yl(m);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const y=xl(t,e,m);if(y)return y}return It(m)};function Ot(e){return!!(be(e)&&e.add)}const Sr=e=>/^\-?\d*\.?\d+$/.test(e);function Qs(e,t){e.indexOf(t)===-1&&e.push(t)}function Js(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class en{constructor(){this.subscriptions=[]}add(t){return Qs(this.subscriptions,t),()=>Js(this.subscriptions,t)}notify(t,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,s,n);else for(let a=0;a<r;a++){const o=this.subscriptions[a];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dl=e=>!isNaN(parseFloat(e));class Ll{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,r=!0)=>{this.prev=this.current,this.current=n;const{delta:a,timestamp:o}=ge;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,Q.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Q.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Dl(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new en);const n=this.events[t].add(s);return t==="change"?()=>{n(),Q.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jr(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rt(e,t){return new Ll(e,t)}const Cr=e=>t=>t.test(e),El={test:e=>e==="auto",parse:e=>e},Nr=[Ze,B,Ne,Be,$o,Oo,El],dt=e=>Nr.find(Cr(e)),Rl=[...Nr,ye,Ue],Fl=e=>Rl.find(Cr(e));function Bl(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,rt(s))}function zl(e,t){const s=Yt(e,t);let o=s?e.makeTargetAnimatable(s,!1):{},{transitionEnd:n={},transition:r={}}=o,a=pe(o,["transitionEnd","transition"]);a=k(k({},a),n);for(const l in a){const c=ta(a[l]);Bl(e,l,c)}}function Il(e,t,s){var n,r;const a=Object.keys(t).filter(l=>!e.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const c=a[l],d=t[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(r=(n=s[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&r!==void 0?r:t[c]),u!=null&&(typeof u=="string"&&(Sr(u)||kr(u))?u=parseFloat(u):!Fl(u)&&Ue.test(d)&&(u=Tr(c,d)),e.addValue(c,rt(u,{owner:e})),s[c]===void 0&&(s[c]=u),u!==null&&e.setBaseTarget(c,u))}}function Ol(e,t){return t?(t[e]||t.default||t).from:void 0}function $l(e,t,s){const n={};for(const r in e){const a=Ol(r,t);if(a!==void 0)n[r]=a;else{const o=s.getValue(r);o&&(n[r]=o.get())}}return n}function Ul({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function Wl(e,t){const s=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}else return s!==t}function Mr(e,t,{delay:s=0,transitionOverride:n,type:r}={}){let h=e.makeTargetAnimatable(t),{transition:a=e.getDefaultTransition(),transitionEnd:o}=h,l=pe(h,["transition","transitionEnd"]);const c=e.getValue("willChange");n&&(a=n);const d=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const f in l){const m=e.getValue(f),y=l[f];if(!m||y===void 0||u&&Ul(u,f))continue;const g=k({delay:s,elapsed:0},Ys(a||{},f));if(window.HandoffAppearAnimations){const v=e.getProps()[Ai];if(v){const x=window.HandoffAppearAnimations(v,f,m,Q);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let P=!g.isHandoff&&!Wl(m,y);if(g.type==="spring"&&(m.getVelocity()||g.velocity)&&(P=!1),m.animation&&(P=!1),P)continue;m.start(Zs(f,m,y,e.shouldReduceMotion&&Ye.has(f)?{type:!1}:g));const w=m.animation;Ot(c)&&(c.add(f),w.then(()=>c.remove(f))),d.push(w)}return o&&Promise.all(d).then(()=>{o&&zl(e,o)}),d}function Ts(e,t,s={}){const n=Yt(e,t,s.custom);let{transition:r=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(r=s.transitionOverride);const a=n?()=>Promise.all(Mr(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=r;return Gl(e,t,d+c,u,h,s)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,d]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>d())}else return Promise.all([a(),o(s.delay)])}function Gl(e,t,s=0,n=0,r=1,a){const o=[],l=(e.variantChildren.size-1)*n,c=r===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(e.variantChildren).sort(Hl).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Ts(d,t,q(k({},a),{delay:s+c(u)})).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Hl(e,t){return e.sortNodePosition(t)}function _l(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(a=>Ts(e,a,s));n=Promise.all(r)}else if(typeof t=="string")n=Ts(e,t,s);else{const r=typeof t=="function"?Yt(e,t,s.custom):t;n=Promise.all(Mr(e,r,s))}return n.then(()=>e.notify("AnimationComplete",t))}const ql=[...Rs].reverse(),Kl=Rs.length;function Xl(e){return t=>Promise.all(t.map(({animation:s,options:n})=>_l(e,s,n)))}function Yl(e){let t=Xl(e);const s=Ql();let n=!0;const r=(c,d)=>{const u=Yt(e,d);if(u){const h=u,{transition:f,transitionEnd:m}=h,y=pe(h,["transition","transitionEnd"]);c=k(k(k({},c),y),m)}return c};function a(c){t=c(e)}function o(c,d){const u=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let y={},g=1/0;for(let w=0;w<Kl;w++){const v=ql[w],x=s[v],T=u[v]!==void 0?u[v]:h[v],S=xt(T),R=v===d?x.isActive:null;R===!1&&(g=w);let L=T===h[v]&&T!==u[v]&&S;if(L&&n&&e.manuallyAnimateOnMount&&(L=!1),x.protectedKeys=k({},y),!x.isActive&&R===null||!T&&!x.prevProp||_t(T)||typeof T=="boolean")continue;let O=Zl(x.prevProp,T)||v===d&&x.isActive&&!L&&S||w>g&&S,J=!1;const ee=Array.isArray(T)?T:[T];let ve=ee.reduce(r,{});R===!1&&(ve={});const{prevResolvedValues:xe={}}=x,Ce=k(k({},xe),ve),fe=K=>{O=!0,m.has(K)&&(J=!0,m.delete(K)),x.needsAnimating[K]=!0};for(const K in Ce){const ae=ve[K],z=xe[K];if(y.hasOwnProperty(K))continue;let b=!1;Ft(ae)&&Ft(z)?b=!Qi(ae,z):b=ae!==z,b?ae!==void 0?fe(K):m.add(K):ae!==void 0&&m.has(K)?fe(K):x.protectedKeys[K]=!0}x.prevProp=T,x.prevResolvedValues=ve,x.isActive&&(y=k(k({},y),ve)),n&&e.blockInitialAnimation&&(O=!1),O&&(!L||J)&&f.push(...ee.map(K=>({animation:K,options:k({type:v},c)})))}if(m.size){const w={};m.forEach(v=>{const x=e.getBaseTarget(v);x!==void 0&&(w[v]=x)}),f.push({animation:w})}let P=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(P=!1),n=!1,P?t(f):Promise.resolve()}function l(c,d,u){var h;if(s[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(c,d)}),s[c].isActive=d;const f=o(u,c);for(const m in s)s[m].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s}}function Zl(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Qi(t,e):!1}function He(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ql(){return{animate:He(!0),whileInView:He(),whileHover:He(),whileTap:He(),whileDrag:He(),whileFocus:He(),exit:He()}}class Jl extends We{constructor(t){super(t),t.animationState||(t.animationState=Yl(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),_t(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let ec=0;class tc extends We{constructor(){super(...arguments),this.id=ec++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t,{custom:n!=null?n:this.node.getProps().custom});s&&!t&&a.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const sc={animation:{Feature:Jl},exit:{Feature:tc}},En=(e,t)=>Math.abs(e-t);function nc(e,t){const s=En(e.x,t.x),n=En(e.y,t.y);return Math.sqrt(es(s,2)+es(n,2))}class Ar{constructor(t,s,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=hs(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=nc(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:g}=ge;this.history.push(q(k({},y),{timestamp:g}));const{onStart:P,onMove:w}=this.handlers;f||(P&&P(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=us(f,this.transformPagePoint),Q.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=hs(h.type==="pointercancel"?this.lastMoveEventInfo:us(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,P),y&&y(h,P)},!qi(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=n,this.contextWindow=r||window;const o=Xt(t),l=us(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=ge;this.history=[q(k({},c),{timestamp:d})];const{onSessionStart:u}=s;u&&u(t,hs(l,this.history)),this.removeListeners=Ie(De(this.contextWindow,"pointermove",this.handlePointerMove),De(this.contextWindow,"pointerup",this.handlePointerUp),De(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ee(this.updatePoint)}}function us(e,t){return t?{point:t(e.point)}:e}function Rn(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hs({point:e},t){return{point:e,delta:Rn(e,Vr(t)),offset:Rn(e,ic(t)),velocity:rc(t,.1)}}function ic(e){return e[0]}function Vr(e){return e[e.length-1]}function rc(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const r=Vr(e);for(;s>=0&&(n=e[s],!(r.timestamp-n.timestamp>Oe(t)));)s--;if(!n)return{x:0,y:0};const a=Le(r.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function we(e){return e.max-e.min}function ks(e,t=0,s=.01){return Math.abs(e-t)<=s}function Fn(e,t,s,n=.5){e.origin=n,e.originPoint=ie(t.min,t.max,e.origin),e.scale=we(s)/we(t),(ks(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ie(s.min,s.max,e.origin)-e.originPoint,(ks(e.translate)||isNaN(e.translate))&&(e.translate=0)}function pt(e,t,s,n){Fn(e.x,t.x,s.x,n?n.originX:void 0),Fn(e.y,t.y,s.y,n?n.originY:void 0)}function Bn(e,t,s){e.min=s.min+t.min,e.max=e.min+we(t)}function oc(e,t,s){Bn(e.x,t.x,s.x),Bn(e.y,t.y,s.y)}function zn(e,t,s){e.min=t.min-s.min,e.max=e.min+we(t)}function gt(e,t,s){zn(e.x,t.x,s.x),zn(e.y,t.y,s.y)}function ac(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?ie(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?ie(s,e,n.max):Math.min(e,s)),e}function In(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function lc(e,{top:t,left:s,bottom:n,right:r}){return{x:In(e.x,s,r),y:In(e.y,t,n)}}function On(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function cc(e,t){return{x:On(e.x,t.x),y:On(e.y,t.y)}}function dc(e,t){let s=.5;const n=we(e),r=we(t);return r>n?s=vt(t.min,t.max-n,e.min):n>r&&(s=vt(e.min,e.max-r,t.min)),$e(0,1,s)}function uc(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Ss=.35;function hc(e=Ss){return e===!1?e=0:e===!0&&(e=Ss),{x:$n(e,"left","right"),y:$n(e,"top","bottom")}}function $n(e,t,s){return{min:Un(e,t),max:Un(e,s)}}function Un(e,t){return typeof e=="number"?e:e[t]||0}const Wn=()=>({translate:0,scale:1,origin:0,originPoint:0}),nt=()=>({x:Wn(),y:Wn()}),Gn=()=>({min:0,max:0}),ue=()=>({x:Gn(),y:Gn()});function ke(e){return[e("x"),e("y")]}function Dr({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function fc({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mc(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function fs(e){return e===void 0||e===1}function Cs({scale:e,scaleX:t,scaleY:s}){return!fs(e)||!fs(t)||!fs(s)}function _e(e){return Cs(e)||Lr(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Lr(e){return Hn(e.x)||Hn(e.y)}function Hn(e){return e&&e!=="0%"}function $t(e,t,s){const n=e-s,r=t*n;return s+r}function _n(e,t,s,n,r){return r!==void 0&&(e=$t(e,r,n)),$t(e,s,n)+t}function Ns(e,t=0,s=1,n,r){e.min=_n(e.min,t,s,n,r),e.max=_n(e.max,t,s,n,r)}function Er(e,{x:t,y:s}){Ns(e.x,t.translate,t.scale,t.originPoint),Ns(e.y,s.translate,s.scale,s.originPoint)}function pc(e,t,s,n=!1){const r=s.length;if(!r)return;t.x=t.y=1;let a,o;for(let l=0;l<r;l++){a=s[l],o=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&it(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Er(e,o)),n&&_e(a.latestValues)&&it(e,a.latestValues))}t.x=qn(t.x),t.y=qn(t.y)}function qn(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ze(e,t){e.min=e.min+t,e.max=e.max+t}function Kn(e,t,[s,n,r]){const a=t[r]!==void 0?t[r]:.5,o=ie(e.min,e.max,a);Ns(e,t[s],t[n],o,t.scale)}const gc=["x","scaleX","originX"],xc=["y","scaleY","originY"];function it(e,t){Kn(e.x,t,gc),Kn(e.y,t,xc)}function Rr(e,t){return Dr(mc(e.getBoundingClientRect(),t))}function yc(e,t,s){const n=Rr(e,s),{scroll:r}=t;return r&&(ze(n.x,r.offset.x),ze(n.y,r.offset.y)),n}const Fr=({current:e})=>e?e.ownerDocument.defaultView:null,vc=new WeakMap;class bc{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Xt(u,"page").point)},a=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Xi(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ke(P=>{let w=this.getAxisMotionValue(P).get()||0;if(Ne.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[P];x&&(w=we(x)*(parseFloat(w)/100))}}this.originPoint[P]=w}),y&&Q.update(()=>y(u,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:P}=h;if(m&&this.currentDirection===null){this.currentDirection=jc(P),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,P),this.updateAxis("y",h.point,P),this.visualElement.render(),g&&g(u,h)},l=(u,h)=>this.stop(u,h),c=()=>ke(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Ar(t,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Fr(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&Q.update(()=>a(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:r}=this.getProps();if(!n||!At(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=ac(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;s&&tt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=lc(r.layoutBox,s):this.constraints=!1,this.elastic=hc(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ke(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=uc(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!tt(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=yc(n,r.root,this.visualElement.getTransformPagePoint());let o=cc(r.layout.layoutBox,a);if(s){const l=s(fc(o));this.hasMutatedConstraints=!!l,l&&(o=Dr(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ke(u=>{if(!At(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,y=k(k({type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10},a),h);return this.startAxisValueAnimation(u,y)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return n.start(Zs(t,n,0,s))}stopAnimation(){ke(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ke(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ke(s=>{const{drag:n}=this.getProps();if(!At(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(s);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[s];a.set(t[s]-ie(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!tt(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ke(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();r[o]=dc({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ke(o=>{if(!At(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(ie(c,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;vc.set(this.visualElement,this);const t=this.visualElement.current,s=De(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();tt(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();const o=Ve(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ke(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:o=Ss,dragMomentum:l=!0}=t;return q(k({},t),{drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:o,dragMomentum:l})}}function At(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function jc(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class wc extends We{constructor(t){super(t),this.removeGroupControls=oe,this.removeListeners=oe,this.controls=new bc(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Xn=e=>(t,s)=>{e&&Q.update(()=>e(t,s))};class Pc extends We{constructor(){super(...arguments),this.removePointerDownListener=oe}onPointerDown(t){this.session=new Ar(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Fr(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Xn(t),onStart:Xn(s),onMove:n,onEnd:(a,o)=>{delete this.session,r&&Q.update(()=>r(a,o))}}}mount(){this.removePointerDownListener=De(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Tc(){const e=p.useContext(Gt);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,r=p.useId();return p.useEffect(()=>n(r),[]),!t&&s?[!1,()=>s&&s(r)]:[!0]}const Lt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yn(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ut={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(B.test(e))e=parseFloat(e);else return e;const s=Yn(e,t.target.x),n=Yn(e,t.target.y);return`${s}% ${n}%`}},kc={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,r=Ue.parse(e);if(r.length>5)return n;const a=Ue.createTransformer(e),o=typeof r[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;r[0+o]/=l,r[1+o]/=c;const d=ie(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),a(r)}};class Sc extends Ds.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=t;Lo(Cc),a&&(s.group&&s.group.add(a),n&&n.register&&r&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions(q(k({},a.options),{onExitComplete:()=>this.safeToRemove()}))),Lt.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:r,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,r||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Q.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Br(e){const[t,s]=Tc(),n=p.useContext(Bs);return Ds.createElement(Sc,q(k({},e),{layoutGroup:n,switchLayoutGroup:p.useContext(Di),isPresent:t,safeToRemove:s}))}const Cc={borderRadius:q(k({},ut),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ut,borderTopRightRadius:ut,borderBottomLeftRadius:ut,borderBottomRightRadius:ut,boxShadow:kc},zr=["TopLeft","TopRight","BottomLeft","BottomRight"],Nc=zr.length,Zn=e=>typeof e=="string"?parseFloat(e):e,Qn=e=>typeof e=="number"||B.test(e);function Mc(e,t,s,n,r,a){r?(e.opacity=ie(0,s.opacity!==void 0?s.opacity:1,Ac(n)),e.opacityExit=ie(t.opacity!==void 0?t.opacity:1,0,Vc(n))):a&&(e.opacity=ie(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<Nc;o++){const l=`border${zr[o]}Radius`;let c=Jn(t,l),d=Jn(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Qn(c)===Qn(d)?(e[l]=Math.max(ie(Zn(c),Zn(d),n),0),(Ne.test(d)||Ne.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=ie(t.rotate||0,s.rotate||0,n))}function Jn(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Ac=Ir(0,.5,ar),Vc=Ir(.5,.95,oe);function Ir(e,t,s){return n=>n<e?0:n>t?1:s(vt(e,t,n))}function ei(e,t){e.min=t.min,e.max=t.max}function Te(e,t){ei(e.x,t.x),ei(e.y,t.y)}function ti(e,t,s,n,r){return e-=t,e=$t(e,1/s,n),r!==void 0&&(e=$t(e,1/r,n)),e}function Dc(e,t=0,s=1,n=.5,r,a=e,o=e){if(Ne.test(t)&&(t=parseFloat(t),t=ie(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ie(a.min,a.max,n);e===a&&(l-=t),e.min=ti(e.min,t,s,l,r),e.max=ti(e.max,t,s,l,r)}function si(e,t,[s,n,r],a,o){Dc(e,t[s],t[n],t[r],t.scale,a,o)}const Lc=["x","scaleX","originX"],Ec=["y","scaleY","originY"];function ni(e,t,s,n){si(e.x,t,Lc,s?s.x:void 0,n?n.x:void 0),si(e.y,t,Ec,s?s.y:void 0,n?n.y:void 0)}function ii(e){return e.translate===0&&e.scale===1}function Or(e){return ii(e.x)&&ii(e.y)}function Rc(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function $r(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ri(e){return we(e.x)/we(e.y)}class Fc{constructor(){this.members=[]}add(t){Qs(this.members,t),t.scheduleRender()}remove(t){if(Js(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(r=>t===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oi(e,t,s){let n="";const r=e.x.translate/t.x,a=e.y.translate/t.y;if((r||a)&&(n=`translate3d(${r}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:u}=s;c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Bc=(e,t)=>e.depth-t.depth;class zc{constructor(){this.children=[],this.isDirty=!1}add(t){Qs(this.children,t),this.isDirty=!0}remove(t){Js(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Bc),this.isDirty=!1,this.children.forEach(t)}}function Ic(e,t){const s=performance.now(),n=({timestamp:r})=>{const a=r-s;a>=t&&(Ee(n),e(a-t))};return Q.read(n,!0),()=>Ee(n)}function Oc(e){window.MotionDebug&&window.MotionDebug.record(e)}function $c(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Uc(e,t,s){const n=be(e)?e:rt(e);return n.start(Zs("",n,t,s)),n.animation}const ai=["","X","Y","Z"],Wc={visibility:"hidden"},li=1e3;let Gc=0;const qe={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ur({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Gc++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qe.totalNodes=qe.resolvedTargetDeltas=qe.recalculatedProjection=0,this.nodes.forEach(qc),this.nodes.forEach(Qc),this.nodes.forEach(Jc),this.nodes.forEach(Kc),Oc(qe)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new zc)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new en),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$c(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Ic(f,250),Lt.hasAnimatedSinceResize&&(Lt.hasAnimatedSinceResize=!1,this.nodes.forEach(di))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||id,{onLayoutAnimationStart:P,onLayoutAnimationComplete:w}=u.getProps(),v=!this.targetLayout||!$r(this.targetLayout,y)||m,x=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,x);const T=q(k({},Ys(g,"layout")),{onPlay:P,onComplete:w});(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else f||di(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ee(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ed),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ci);return}this.isUpdating||this.nodes.forEach(Yc),this.isUpdating=!1,this.nodes.forEach(Zc),this.nodes.forEach(Hc),this.nodes.forEach(_c),this.clearAllSnapshots();const l=performance.now();ge.delta=$e(0,1e3/60,l-ge.timestamp),ge.timestamp=l,ge.isProcessing=!0,ns.update.process(ge),ns.preRender.process(ge),ns.render.process(ge),ge.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Xc),this.sharedNodes.forEach(td)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Q.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Q.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Or(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||_e(this.latestValues)||u)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),rd(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ue();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(ze(l.x,c.offset.x),ze(l.y,c.offset.y)),l}removeElementScroll(o){const l=ue();Te(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){Te(l,o);const{scroll:f}=this.root;f&&(ze(l.x,-f.offset.x),ze(l.y,-f.offset.y))}ze(l.x,u.offset.x),ze(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=ue();Te(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&it(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),_e(u.latestValues)&&it(c,u.latestValues)}return _e(this.latestValues)&&it(c,this.latestValues),c}removeTransform(o){const l=ue();Te(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!_e(d.latestValues))continue;Cs(d.latestValues)&&d.updateSnapshot();const u=ue(),h=d.measurePageBox();Te(u,h),ni(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return _e(this.latestValues)&&ni(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options=q(k(k({},this.options),o),{crossfade:o.crossfade!==void 0?o.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ge.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=ge.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),gt(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Te(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oc(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Te(this.target,this.layout.layoutBox),Er(this.target,this.targetDelta)):Te(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),gt(this.relativeTargetOrigin,this.target,m.target),Te(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qe.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Cs(this.parent.latestValues)||Lr(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ge.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Te(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;pc(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:y}=l;if(!y){this.projectionTransform&&(this.projectionDelta=nt(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=nt(),this.projectionDeltaWithTransform=nt());const g=this.projectionTransform;pt(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=oi(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),qe.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u=k({},this.latestValues),h=nt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ue(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,P=this.getStack(),w=!P||P.members.length<=1,v=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(nd));this.animationProgress=0;let x;this.mixTargetDelta=T=>{const S=T/1e3;ui(h.x,o.x,S),ui(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gt(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sd(this.relativeTarget,this.relativeTargetOrigin,f,S),x&&Rc(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ue()),Te(x,this.relativeTarget)),g&&(this.animationValues=u,Mc(u,d,this.latestValues,S,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ee(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Q.update(()=>{Lt.hasAnimatedSinceResize=!0,this.currentAnimation=Uc(0,li,q(k({},o),{onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(li),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Wr(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ue();const h=we(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=we(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Te(l,c),it(l,u),pt(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Fc),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<ai.length;u++){const h="rotate"+ai[u];c[h]&&(d[h]=c[h],o.setStaticValue(h,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Wc;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Dt(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Dt(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!_e(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=oi(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:m,y}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Et){if(f[g]===void 0)continue;const{correct:P,applyTo:w}=Et[g],v=d.transform==="none"?f[g]:P(f[g],h);if(w){const x=w.length;for(let T=0;T<x;T++)d[w[T]]=v}else d[g]=v}return this.options.layoutId&&(d.pointerEvents=h===this?Dt(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(ci),this.root.sharedNodes.clear()}}}function Hc(e){e.updateLayout()}function _c(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:a}=e.options,o=s.source!==e.layout.source;a==="size"?ke(h=>{const f=o?s.measuredBox[h]:s.layoutBox[h],m=we(f);f.min=n[h].min,f.max=f.min+m}):Wr(a,s.layoutBox,n)&&ke(h=>{const f=o?s.measuredBox[h]:s.layoutBox[h],m=we(n[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=nt();pt(l,n,s.layoutBox);const c=nt();o?pt(c,e.applyTransform(r,!0),s.measuredBox):pt(c,n,s.layoutBox);const d=!Or(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=ue();gt(y,s.layoutBox,f.layoutBox);const g=ue();gt(g,n,m.layoutBox),$r(y,g)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function qc(e){qe.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Kc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Xc(e){e.clearSnapshot()}function ci(e){e.clearMeasurements()}function Yc(e){e.isLayoutDirty=!1}function Zc(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function di(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Qc(e){e.resolveTargetDelta()}function Jc(e){e.calcProjection()}function ed(e){e.resetRotation()}function td(e){e.removeLeadSnapshot()}function ui(e,t,s){e.translate=ie(t.translate,0,s),e.scale=ie(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function hi(e,t,s,n){e.min=ie(t.min,s.min,n),e.max=ie(t.max,s.max,n)}function sd(e,t,s,n){hi(e.x,t.x,s.x,n),hi(e.y,t.y,s.y,n)}function nd(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const id={duration:.45,ease:[.4,0,.1,1]},fi=e=>typeof navigator!="undefined"&&navigator.userAgent.toLowerCase().includes(e),mi=fi("applewebkit/")&&!fi("chrome/")?Math.round:oe;function pi(e){e.min=mi(e.min),e.max=mi(e.max)}function rd(e){pi(e.x),pi(e.y)}function Wr(e,t,s){return e==="position"||e==="preserve-aspect"&&!ks(ri(t),ri(s),.2)}const od=Ur({attachResizeListener:(e,t)=>Ve(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ms={current:void 0},Gr=Ur({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ms.current){const e=new od({});e.mount(window),e.setOptions({layoutScroll:!0}),ms.current=e}return ms.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ad={pan:{Feature:Pc},drag:{Feature:wc,ProjectionNode:Gr,MeasureLayout:Br}},ld=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cd(e){const t=ld.exec(e);if(!t)return[,];const[,s,n]=t;return[s,n]}function Ms(e,t,s=1){const[n,r]=cd(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const o=a.trim();return Sr(o)?parseFloat(o):o}else return ys(r)?Ms(r,t,s+1):r}function dd(e,n,s){var t=pe(n,[]);const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:s};s&&(s=k({},s)),e.values.forEach(a=>{const o=a.get();if(!ys(o))return;const l=Ms(o,r);l&&a.set(l)});for(const a in t){const o=t[a];if(!ys(o))continue;const l=Ms(o,r);l&&(t[a]=l,s||(s={}),s[a]===void 0&&(s[a]=o))}return{target:t,transitionEnd:s}}const ud=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Hr=e=>ud.has(e),hd=e=>Object.keys(e).some(Hr),gi=e=>e===Ze||e===B,xi=(e,t)=>parseFloat(e.split(", ")[t]),yi=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/);if(r)return xi(r[1],t);{const a=n.match(/^matrix\((.+)\)$/);return a?xi(a[1],e):0}},fd=new Set(["x","y","z"]),md=bt.filter(e=>!fd.has(e));function pd(e){const t=[];return md.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const ot={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:yi(4,13),y:yi(5,14)};ot.translateX=ot.x;ot.translateY=ot.y;const gd=(e,t,s)=>{const n=t.measureViewportBox(),r=t.current,a=getComputedStyle(r),{display:o}=a,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=ot[d](n,a)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const u=t.getValue(d);u&&u.jump(l[d]),e[d]=ot[d](c,a)}),e},xd=(e,t,s={},n={})=>{t=k({},t),n=k({},n);const r=Object.keys(t).filter(Hr);let a=[],o=!1;const l=[];if(r.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let u=s[c],h=dt(u);const f=t[c];let m;if(Ft(f)){const y=f.length,g=f[0]===null?1:0;u=f[g],h=dt(u);for(let P=g;P<y&&f[P]!==null;P++)m?Hs(dt(f[P])===m):m=dt(f[P])}else m=dt(f);if(h!==m)if(gi(h)&&gi(m)){const y=d.get();typeof y=="string"&&d.set(parseFloat(y)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===B&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(u===0||f===0)?u===0?d.set(m.transform(u)):t[c]=h.transform(f):(o||(a=pd(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],d.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=gd(t,e,l);return a.length&&a.forEach(([u,h])=>{e.getValue(u).set(h)}),e.render(),Ht&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:n}}else return{target:t,transitionEnd:n}};function yd(e,t,s,n){return hd(t)?xd(e,t,s,n):{target:t,transitionEnd:n}}const vd=(e,t,s,n)=>{const r=dd(e,t,n);return t=r.target,n=r.transitionEnd,yd(e,t,s,n)},As={current:null},_r={current:!1};function bd(){if(_r.current=!0,!!Ht)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>As.current=e.matches;e.addListener(t),t()}else As.current=!1}function jd(e,t,s){const{willChange:n}=t;for(const r in t){const a=t[r],o=s[r];if(be(a))e.addValue(r,a),Ot(n)&&n.add(r);else if(be(o))e.addValue(r,rt(a,{owner:e})),Ot(n)&&n.remove(r);else if(o!==a)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(a)}else{const l=e.getStaticValue(r);e.addValue(r,rt(l!==void 0?l:a,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const vi=new WeakMap,qr=Object.keys(yt),wd=qr.length,bi=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Pd=Fs.length;class Td{constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Q.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget=k({},l),this.initialValues=s.initial?k({},l):{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=qt(s),this.isVariantNode=Vi(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const h=this.scrapeMotionValuesFromProps(s,{}),{willChange:d}=h,u=pe(h,["willChange"]);for(const f in u){const m=u[f];l[f]!==void 0&&be(m)&&(m.set(l[f],!1),Ot(d)&&d.add(f))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,vi.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),_r.current||bd(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:As.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){vi.delete(this.current),this.projection&&this.projection.unmount(),Ee(this.notifyUpdate),Ee(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const n=Ye.has(t),r=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Q.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures(o,n,r,a){var l=o,{children:t}=l,s=pe(l,["children"]);let c,d;for(let u=0;u<wd;u++){const h=qr[u],{isEnabled:f,Feature:m,ProjectionNode:y,MeasureLayout:g}=yt[h];y&&(c=y),f(s)&&(!this.features[h]&&m&&(this.features[h]=new m(this)),g&&(d=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:h,drag:f,dragConstraints:m,layoutScroll:y,layoutRoot:g}=s;this.projection.setOptions({layoutId:u,layout:h,alwaysMeasureLayout:!!f||m&&tt(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:a,layoutScroll:y,layoutRoot:g})}return d}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<bi.length;n++){const r=bi[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a=t["on"+r];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=jd(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<Pd;n++){const r=Fs[n],a=this.props[r];(xt(a)||a===!1)&&(s[r]=a)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=rt(s,{owner:this}),this.addValue(t,n)),n}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props,r=typeof n=="string"||typeof n=="object"?(s=Gs(this.props,n))===null||s===void 0?void 0:s[t]:void 0;if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!be(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new en),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Kr extends Td{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}makeTargetAnimatableFromInstance(o,{transformValues:r},a){var l=o,{transition:t,transitionEnd:s}=l,n=pe(l,["transition","transitionEnd"]);let c=$l(n,t||{},this);if(r&&(s&&(s=r(s)),n&&(n=r(n)),c&&(c=r(c))),a){Il(this,n,c);const d=vd(this,n,c,s);s=d.transitionEnd,n=d.target}return k({transition:t,transitionEnd:s},n)}}function kd(e){return window.getComputedStyle(e)}class Sd extends Kr{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(Ye.has(s)){const n=Xs(s);return n&&n.default||0}else{const n=kd(t),r=(Ri(s)?n.getPropertyValue(s):n[s])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Rr(t,s)}build(t,s,n,r){Is(t,s,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,s){return Ws(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;be(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,n,r){$i(t,s,n,r)}}class Cd extends Kr{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Ye.has(s)){const n=Xs(s);return n&&n.default||0}return s=Ui.has(s)?s:Es(s),t.getAttribute(s)}measureInstanceViewportBox(){return ue()}scrapeMotionValuesFromProps(t,s){return Gi(t,s)}build(t,s,n,r){$s(t,s,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,s,n,r){Wi(t,s,n,r)}mount(t){this.isSVGTag=Us(t.tagName),super.mount(t)}}const Nd=(e,t)=>zs(e)?new Cd(t,{enableHardwareAcceleration:!1}):new Sd(t,{enableHardwareAcceleration:!0}),Md={layout:{ProjectionNode:Gr,MeasureLayout:Br}},Ad=k(k(k(k({},sc),wa),ad),Md),Vd=Vo((e,t)=>ca(e,t,Ad,Nd));function Xr(){const e=p.useRef(!1);return Ls(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Dd(){const e=Xr(),[t,s]=p.useState(0),n=p.useCallback(()=>{e.current&&s(t+1)},[t]);return[p.useCallback(()=>Q.postRender(n),[n]),t]}class Ld extends p.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ed({children:e,isPresent:t}){const s=p.useId(),n=p.useRef(null),r=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(t||!n.current||!a||!o)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),p.createElement(Ld,{isPresent:t,childRef:n,sizeRef:r},p.cloneElement(e,{ref:n}))}const ps=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:r,presenceAffectsLayout:a,mode:o})=>{const l=Hi(Rd),c=p.useId(),d=p.useMemo(()=>({id:c,initial:t,isPresent:s,custom:r,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),a?void 0:[s]);return p.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[s]),p.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=p.createElement(Ed,{isPresent:s},e)),p.createElement(Gt.Provider,{value:d},e)};function Rd(){return new Map}function Fd(e){return p.useEffect(()=>()=>e(),[])}const Ke=e=>e.key||"";function Bd(e,t){e.forEach(s=>{const n=Ke(s);t.set(n,s)})}function zd(e){const t=[];return p.Children.forEach(e,s=>{p.isValidElement(s)&&t.push(s)}),t}const Id=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:r,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=p.useContext(Bs).forceRender||Dd()[0],c=Xr(),d=zd(e);let u=d;const h=p.useRef(new Map).current,f=p.useRef(u),m=p.useRef(new Map).current,y=p.useRef(!0);if(Ls(()=>{y.current=!1,Bd(d,m),f.current=u}),Fd(()=>{y.current=!0,m.clear(),h.clear()}),y.current)return p.createElement(p.Fragment,null,u.map(v=>p.createElement(ps,{key:Ke(v),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:a,mode:o},v)));u=[...u];const g=f.current.map(Ke),P=d.map(Ke),w=g.length;for(let v=0;v<w;v++){const x=g[v];P.indexOf(x)===-1&&!h.has(x)&&h.set(x,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((v,x)=>{if(P.indexOf(x)!==-1)return;const T=m.get(x);if(!T)return;const S=g.indexOf(x);let R=v;if(!R){const L=()=>{h.delete(x);const M=Array.from(m.keys()).filter(O=>!P.includes(O));if(M.forEach(O=>m.delete(O)),f.current=d.filter(O=>{const J=Ke(O);return J===x||M.includes(J)}),!h.size){if(c.current===!1)return;l(),n&&n()}};R=p.createElement(ps,{key:Ke(T),isPresent:!1,onExitComplete:L,custom:t,presenceAffectsLayout:a,mode:o},T),h.set(x,R)}u.splice(S,0,R)}),u=u.map(v=>{const x=v.key;return h.has(x)?v:p.createElement(ps,{key:Ke(v),isPresent:!0,presenceAffectsLayout:a,mode:o},v)}),p.createElement(p.Fragment,null,h.size?u:u.map(v=>p.cloneElement(v)))};var Od={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $d=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Se=(e,t)=>{const s=p.forwardRef((u,d)=>{var h=u,{color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:l}=h,c=pe(h,["color","size","strokeWidth","absoluteStrokeWidth","children"]);return p.createElement("svg",k(q(k({ref:d},Od),{width:r,height:r,stroke:n,strokeWidth:o?Number(a)*24/Number(r):a,className:`lucide lucide-${$d(e)}`}),c),[...t.map(([f,m])=>p.createElement(f,m)),...(Array.isArray(l)?l:[l])||[]])});return s.displayName=`${e}`,s},ji=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ud=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Yr=Se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Wd=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Gd=Se("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),Hd=Se("MoonStar",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}],["path",{d:"M19 3v4",key:"vgv24u"}],["path",{d:"M21 5h-4",key:"1wcg1f"}]]),_d=Se("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),qd=Se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Kd=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Xd=Se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Yd=Se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Zd=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Qd({dark:e}){return i.jsxs("div",{className:`absolute inset-0 -z-10 ${e?"bg-zinc-900":"bg-zinc-50"}`,children:[i.jsx("div",{className:"absolute inset-0",style:{background:e?"radial-gradient(1200px 600px at 50% 30%, rgba(255,255,255,0.08), rgba(0,0,0,0)), radial-gradient(800px 300px at 10% 80%, rgba(255,255,255,0.06), rgba(0,0,0,0)), radial-gradient(800px 300px at 90% 80%, rgba(255,255,255,0.06), rgba(0,0,0,0))":"radial-gradient(1200px 600px at 50% 30%, rgba(0,0,0,0.05), rgba(255,255,255,0)), radial-gradient(800px 300px at 10% 80%, rgba(0,0,0,0.04), rgba(255,255,255,0)), radial-gradient(800px 300px at 90% 80%, rgba(0,0,0,0.04), rgba(255,255,255,0))"}}),i.jsx("div",{className:`absolute inset-0 ${e?"bg-gradient-to-b from-transparent to-black/30":"bg-gradient-to-b from-transparent to-white/50"}`})]})}function Jd({onClose:e,neighbors:t}){return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:e}),i.jsxs("div",{className:"relative w-[min(780px,92vw)] max-h-[86vh] overflow-auto rounded-2xl border border-white/10 bg-zinc-900 text-zinc-100 p-5 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"text-lg font-semibold flex items-center gap-2",children:[i.jsx(Yr,{size:18})," Help & Guide"]}),i.jsx("button",{onClick:e,className:"rounded-lg p-1 hover:bg-white/10",children:i.jsx(Zd,{size:18})})]}),i.jsxs("div",{className:"space-y-5 text-sm leading-6",children:[i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Live Drip"}),i.jsxs("p",{children:["When ",i.jsx("span",{className:"font-semibold",children:"Live drip"})," is on, the app automatically adds a new curated seed word every ~1.4 seconds. It simulates visitors dropping new cards into the gallery so you can watch clusters form in real time. Turn it off to curate manually."]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"How neighbors are selected"}),i.jsxs("p",{children:["Each phrase becomes a normalized vector. For a given point ",i.jsx("code",{children:"x"}),", we compute cosine similarity ",i.jsx("code",{children:"cos(x, y)"})," to every other point ",i.jsx("code",{children:"y"})," and pick the top",i.jsx("span",{className:"font-semibold",children:t})," (excluding itself). Those become the lines you see."]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Dimensionality Reduction Techniques"}),i.jsx("p",{className:"mb-2",children:"High-dimensional data (like our token-based embeddings) needs to be projected to 2D/3D for visualization. Each technique reveals different aspects of the data structure:"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[i.jsx("div",{className:"font-semibold text-blue-300 mb-1",children:" UMAP (Current)"}),i.jsxs("div",{className:"text-xs space-y-1 opacity-90",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Type:"})," Non-linear manifold learning"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Preserves:"})," Local neighborhoods & globalThis topology"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Best for:"})," Discovering clusters and local structure"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Speed:"})," Fast for large datasets"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Parameters:"})," n_neighbors (local vs globalThis), min_dist (cluster tightness)"]})]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[i.jsx("div",{className:"font-semibold text-green-300 mb-1",children:" PCA (Current)"}),i.jsxs("div",{className:"text-xs space-y-1 opacity-90",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Type:"})," Linear projection"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Preserves:"})," Maximum variance directions"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Best for:"})," Understanding main data directions"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Speed:"})," Very fast, deterministic"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Limitation:"})," May miss non-linear patterns"]})]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[i.jsx("div",{className:"font-semibold text-purple-300 mb-1",children:" t-SNE (Popular Alternative)"}),i.jsxs("div",{className:"text-xs space-y-1 opacity-90",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Type:"})," Non-linear, probability-based"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Preserves:"})," Local similarities excellently"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Best for:"})," Cluster visualization"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Limitation:"})," Slow, can create false clusters"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Note:"})," Great for exploration but clusters may be misleading"]})]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-orange-500/10 border border-orange-500/20",children:[i.jsx("div",{className:"font-semibold text-orange-300 mb-1",children:" Other Methods"}),i.jsxs("div",{className:"text-xs space-y-1 opacity-90",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Truncated SVD:"})," Like PCA but for sparse data"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"MDS:"})," Preserves pairwise distances"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Isomap:"})," Non-linear, preserves geodesic distances"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"LLE:"})," Local linear embedding"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Random Projection:"})," Fast approximation"]})]})]})]}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[i.jsx("div",{className:"font-semibold text-yellow-300 mb-1",children:" Which to Choose?"}),i.jsxs("div",{className:"text-xs space-y-1 opacity-90",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"For exploration:"})," Start with UMAP (balanced view) or t-SNE (cluster focus)"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"For interpretation:"})," Use PCA to understand main variance directions"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"For speed:"})," PCA or Random Projection for large datasets"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"For publishing:"})," UMAP is becoming the new standard"]})]})]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" How GPT-4 Tokenizer Works"}),i.jsx("p",{className:"mb-2",children:"GPT-4's tokenizer learned from vast amounts of text to break down language into meaningful tokens using Byte Pair Encoding (BPE). This creates token-based embeddings where:"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Distance = Semantic similarity"})," (closer = more related)"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Direction matters:"}),' "king"  "queen" similar to "man"  "woman"']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Context is key:"}),' "bank" (river) vs "bank" (money) have different vectors']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Unexpected connections:"})," Reveals hidden cultural and linguistic patterns"]})]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Matrix room"}),i.jsx("p",{children:"Shows pairwise cosine similarity as a heatmap (blue  low, red  high). Hover any cell to see the value."})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Interactive Tokenizer"}),i.jsx("p",{className:"mb-2",children:"The tokenizer tab lets you explore how text gets broken down into tokens before being converted to embeddings. This is crucial for understanding how language models process text."}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Real-time tokenization:"})," See tokens update as you type"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Color-coded visualization:"})," Each token gets a unique color"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Token statistics:"})," Character count, compression ratio, and more"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Special token detection:"})," Identifies [CLS], [SEP], and other control tokens"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"BPE explanation:"})," Learn how Byte Pair Encoding works"]})]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Understanding Unexpected Relationships"}),i.jsxs("p",{className:"mb-2",children:[i.jsx("span",{className:"font-semibold",children:'Why might "dog" and "piano" seem similar?'})," GPT-4's tokenizer learns from how words appear together in text across the internet. Unexpected similarities often reveal hidden connections:"]}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsx("div",{children:i.jsx("strong",{children:" Common reasons for surprising similarities:"})}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Shared contexts:"}),' "dog" and "piano" both appear in home/family settings']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Cultural associations:"})," Both are common in children's stories and media"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Sensory connections:"}),' Both can "make sounds" (barking, playing)']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Emotional contexts:"})," Both associated with comfort, companionship, learning"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Grammatical patterns:"})," Similar sentence structures and roles"]})]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Typical Relationship Examples"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsx("div",{children:' "king"  "queen" = ~0.8  (obvious semantic relationship)'}),i.jsx("div",{children:' "happy"  "joyful" = ~0.9  (synonyms)'}),i.jsx("div",{children:' "dog"  "piano" = ~0.3  (unexpected but contextually related)'}),i.jsx("div",{children:' "car"  "bicycle" = ~0.6  (category similarity)'}),i.jsx("div",{children:' "love"  "mathematics" = ~0.1  (truly unrelated)'})]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Similarity Scale Explained"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Green (0.7-1.0):"}),' Synonyms, obvious relationships ("happy"  "joyful")']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Yellow (0.4-0.7):"}),' Same category or domain ("car"  "truck")']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Orange (0.1-0.4):"}),' Contextual connections ("dog"  "piano")']}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Red (0.0-0.1):"})," No meaningful relationship found"]})]}),i.jsxs("p",{className:"text-xs mt-2 opacity-80",children:[" ",i.jsx("strong",{children:"Pro tip:"})," Orange connections often reveal the most interesting cultural and contextual patterns!"]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Real-World Applications"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-500/10 border border-blue-500/20",children:[i.jsx("div",{className:"font-semibold text-blue-300 mb-1",children:" Scientific Research"}),i.jsxs("div",{className:"text-xs opacity-90",children:[" ",i.jsx("strong",{children:"Genomics:"})," t-SNE for visualizing cell types, UMAP for trajectory analysis",i.jsx("br",{})," ",i.jsx("strong",{children:"Neuroscience:"})," PCA for brain imaging, dimensionality reduction for neural data",i.jsx("br",{})," ",i.jsx("strong",{children:"Drug discovery:"})," Chemical space visualization with various projections"]})]}),i.jsxs("div",{className:"p-2 rounded bg-green-500/10 border border-green-500/20",children:[i.jsx("div",{className:"font-semibold text-green-300 mb-1",children:" Business & Tech"}),i.jsxs("div",{className:"text-xs opacity-90",children:[" ",i.jsx("strong",{children:"Recommendation systems:"})," User/product embeddings visualization",i.jsx("br",{})," ",i.jsx("strong",{children:"Document analysis:"})," Topic clustering and semantic search",i.jsx("br",{})," ",i.jsx("strong",{children:"Market research:"})," Customer segmentation and behavior patterns"]})]}),i.jsxs("div",{className:"p-2 rounded bg-purple-500/10 border border-purple-500/20",children:[i.jsx("div",{className:"font-semibold text-purple-300 mb-1",children:" Creative Fields"}),i.jsxs("div",{className:"text-xs opacity-90",children:[" ",i.jsx("strong",{children:"Art generation:"})," Style space exploration with neural networks",i.jsx("br",{})," ",i.jsx("strong",{children:"Music analysis:"})," Genre clustering and similarity visualization",i.jsx("br",{})," ",i.jsx("strong",{children:"Game design:"})," Procedural content generation and balancing"]})]})]})]}),i.jsxs("section",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" How to Explore"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{children:["1. ",i.jsx("strong",{children:"Click words"})," to see their closest neighbors"]}),i.jsxs("div",{children:["2. ",i.jsx("strong",{children:"Check the Matrix"})," to compare any two words"]}),i.jsxs("div",{children:["3. ",i.jsx("strong",{children:"Use 3D view"})," to see the semantic landscape"]}),i.jsxs("div",{children:["4. ",i.jsx("strong",{children:"Zoom and rotate"})," in 3D to examine clusters"]}),i.jsxs("div",{children:["5. ",i.jsx("strong",{children:"Add your own words"})," to see where they fit"]}),i.jsxs("div",{children:["6. ",i.jsx("strong",{children:"Switch between UMAP/PCA"})," to see different organizational patterns"]}),i.jsxs("div",{children:["7. ",i.jsx("strong",{children:"Adjust parameters"})," to understand their effect on clustering"]})]})]})]})]})]})}function Vs(e,t){let s=0;for(let n=0;n<e.length;n++)s+=e[n]*t[n];return s}function Zr(e,t){return Vs(e,t)}function eu(e){const t=e.length,s=Array.from({length:t},()=>new Array(t).fill(0));for(let n=0;n<t;n++)for(let r=n;r<t;r++){const a=(Zr(e[n],e[r])+1)/2;s[n][r]=a,s[r][n]=a}return s}function tu(e,t=2){const s=e.length,n=[];for(let r=0;r<s;r++){const a=[];for(let o=0;o<s;o++)o!==r&&a.push({j:o,s:Zr(e[r],e[o])});a.sort((o,l)=>l.s-o.s),n.push(a.slice(0,t))}return n}const wi=["art","museum","gallery","painting","sculpture","canvas","frame","curator","music","melody","rhythm","violin","piano","dog","cat","wolf","tiger","bird","whale","apple","banana","orange","grape","lemon","car","bicycle","train","engine","bridge","city","street","plaza","tower","park","code","algorithm","vector","matrix","search","cluster","love","joy","sadness","anger","calm","ocean","beach","mountain","forest","desert","space","planet","star","galaxy","moon"],gs={"Queens & Kings":{description:"Famous queens, kings, and royalty across different domains",words:["Queen","Queen Elizabeth","King Charles","Michael Jackson","Pel","Elvis Presley","Freddie Mercury","crown","throne","royalty","legend","icon","monarch","kingdom"]},"Cultural Icons":{description:"Mix of legendary people, artworks, and cultural phenomena",words:["Beatles","Einstein","Shakespeare","Mona Lisa","Mozart","Leonardo da Vinci","Beethoven","Picasso","genius","masterpiece","famous","legendary","classic","timeless"]},"Same Word, Different Worlds":{description:"Words with fascinating multiple meanings across contexts",words:["bank","bat","rock","spring","mouse","turkey","bark","duck","bear","club","bank account","baseball bat","rock music","mouse computer"]},"Tech vs Nature":{description:"Digital concepts that share names with natural phenomena",words:["cloud","stream","web","python","apple","blackberry","firefox","safari","windows","thunder","lightning","storm","river","forest"]},"Colors & Emotions":{description:"How colors connect to feelings and cultural meanings",words:["red","blue","green","yellow","purple","black","white","gold","love","sadness","envy","happiness","royalty","mourning","purity","wealth"]},"Time & Space":{description:"Temporal and spatial concepts and their relationships",words:["yesterday","tomorrow","future","past","present","here","there","everywhere","nowhere","always","never","sometimes","distance","closeness"]}},Vt=["#6366f1","#22c55e","#ef4444","#eab308","#06b6d4","#a855f7","#f97316"];function Pi(e){const t=220-220*e,s=70,n=35+25*e;return`hsl(${t}, ${s}%, ${n}%)`}function su(e,t){var f,m,y,g,P;const s=(f=t==null?void 0:t.minW)!=null?f:72,n=(m=t==null?void 0:t.maxW)!=null?m:300,r=(y=t==null?void 0:t.padX)!=null?y:12;let a=(g=t==null?void 0:t.baseSize)!=null?g:12;const o=(P=t==null?void 0:t.minSize)!=null?P:10,l=w=>w*.6,c=(w,v)=>Math.max(s-r*2,Math.min(n-r*2,w.length*l(v)));let d=Math.min(n,Math.max(s,c(e,a)+r*2));for(;c(e,a)>d-r*2&&a>o;)a-=1;let u=e;const h=Math.floor((d-r*2)/l(a));return e.length>h&&(u=e.slice(0,Math.max(0,h-1))+""),{width:d,height:44,fontSize:a,text:u,padX:r}}function nu({words:e,vectors:t,dark:s}){const n=p.useMemo(()=>eu(t),[t]),r=22,a=e.length,o=r*a,l=r*a+24;return i.jsxs("svg",{width:Math.max(360,o+140),height:Math.max(200,l+120),className:"block",children:[e.map((c,d)=>i.jsx("text",{x:0,y:60+d*r+r*.7,fontSize:11,fill:s?"#e5e7eb":"#111827",children:c},`r-${d}`)),e.map((c,d)=>i.jsx("text",{x:80+d*r+r*.5,y:40,fontSize:11,fill:s?"#e5e7eb":"#111827",transform:`rotate(-45, ${80+d*r+r*.5}, 40)`,children:c},`c-${d}`)),i.jsx("g",{transform:"translate(80, 50)",children:n.map((c,d)=>c.map((u,h)=>i.jsxs("g",{children:[i.jsx("title",{children:`${e[d]}  ${e[h]}: ${u.toFixed(2)}`}),i.jsx("rect",{x:h*r,y:d*r,width:r-1,height:r-1,fill:Pi(u),rx:3})]},`cell-${d}-${h}`)))}),i.jsxs("g",{transform:`translate(80, ${l+60})`,children:[i.jsx("text",{x:0,y:0,fontSize:11,fill:s?"#e5e7eb":"#111827",children:"Similarity"}),[0,.25,.5,.75,1].map((c,d)=>i.jsxs("g",{transform:`translate(${60+d*80}, -12)`,children:[i.jsx("rect",{width:70,height:12,fill:Pi(c),rx:3}),i.jsx("text",{x:35,y:28,textAnchor:"middle",fontSize:11,fill:s?"#e5e7eb":"#111827",children:c.toFixed(2)})]},d))]})]})}function iu({words:e,vectors:t,selected:s,onSelect:n,dark:r,selectedNeighbors:a}){const o=p.useRef(null),l=p.useRef(),c=p.useRef(),d=p.useRef(),u=p.useRef(),[h,f]=p.useState(!0),[m,y]=p.useState(null),g=p.useRef(),P=p.useRef(),w=p.useRef(),v=p.useRef(),x=p.useRef(),T=p.useRef(),[S,R]=p.useState(null),L=p.useRef([]),[M,O]=p.useState(null),J=z=>{if(z.length===0)return{coords:[],varianceExplained:[0,0,0],totalVariance:0};console.log("Running PCA on",z.length,"vectors with",z[0].length,"dimensions");const b=z.map(V=>Array.from(V)),Z=new ki(b),A=Z.predict(b,{nComponents:3}).to2DArray().map(V=>[V[0]*15,V[1]*15,V[2]*15]),C=Z.getExplainedVariance(),D=C.slice(0,3).reduce((V,H)=>V+H,0);return console.log("PCA complete. Variance explained:",C.slice(0,3).map(V=>`${(V*100).toFixed(1)}%`)),console.log("Total variance captured in 3D:",`${(D*100).toFixed(1)}%`),{coords:A,varianceExplained:C.slice(0,3),totalVariance:D}},ee=(z,b)=>{const W=new lt().setFromPoints([new je(-25,0,0),new je(25,0,0)]),A=new ct({color:16729156,opacity:.7,transparent:!0}),C=new Ge(W,A);z.add(C);const D=new lt().setFromPoints([new je(0,-25,0),new je(0,25,0)]),V=new ct({color:4521796,opacity:.7,transparent:!0}),H=new Ge(D,V);z.add(H);const Y=new lt().setFromPoints([new je(0,0,-25),new je(0,0,25)]),_=new ct({color:4474111,opacity:.7,transparent:!0}),$=new Ge(Y,_);z.add($);const ne=(U,le,te)=>{const ce=document.createElement("canvas"),he=ce.getContext("2d");ce.width=64,ce.height=32,he.fillStyle=`#${te.toString(16).padStart(6,"0")}`,he.font="bold 24px Arial",he.textAlign="center",he.fillText(U,32,22);const Qe=new fn(ce),Me=new mn({map:Qe,transparent:!0}),Re=new ts(Me);Re.position.copy(le),Re.scale.set(3,1.5,1),z.add(Re)};ne("PC1",new je(25+3,0,0),16729156),ne("PC2",new je(0,25+3,0),4521796),ne("PC3",new je(0,0,25+3),4474111)},ve=(z,b)=>{const A=b?2236962:13421772,C=new hn(50,10,A,A);C.rotateX(Math.PI/2),C.material.opacity=.2,C.material.transparent=!0,z.add(C);const D=new hn(50,10,A,A);D.material.opacity=.1,D.material.transparent=!0,z.add(D)},xe=(z,b,Z)=>{const W=C=>{const D=z.getBoundingClientRect();T.current.x=(C.clientX-D.left)/D.width*2-1,T.current.y=-((C.clientY-D.top)/D.height)*2+1,x.current.setFromCamera(T.current,b);const V=g.current;if(V){const H=x.current.intersectObjects(V.children);if(H.length>0){const Y=H[0].object.userData.index;R(Y),z.style.cursor="pointer"}else R(null),z.style.cursor="default"}},A=C=>{const D=z.getBoundingClientRect();T.current.x=(C.clientX-D.left)/D.width*2-1,T.current.y=-((C.clientY-D.top)/D.height)*2+1,x.current.setFromCamera(T.current,b);const V=g.current;if(V){const H=x.current.intersectObjects(V.children);if(H.length>0){const Y=H[0].object.userData.index;n(Y)}}};return z.addEventListener("mousemove",W),z.addEventListener("click",A),()=>{z.removeEventListener("mousemove",W),z.removeEventListener("click",A)}},Ce=(z,b)=>{let Z=!1,W=0,A=0,C=0,D=0,V=15;const H=()=>{z.position.x=Math.cos(C)*Math.cos(D)*V,z.position.y=Math.sin(D)*V,z.position.z=Math.sin(C)*Math.cos(D)*V,z.lookAt(0,0,0)},Y=U=>{Z=!0,W=U.clientX,A=U.clientY},_=U=>{if(!Z)return;const le=U.clientX-W,te=U.clientY-A;C+=le*.01,D+=te*.01,D=Math.max(-Math.PI/2+.1,Math.min(Math.PI/2-.1,D)),H(),W=U.clientX,A=U.clientY},$=()=>{Z=!1},ne=U=>{U.preventDefault();const le=.1,te=U.deltaY>0?1:-1;V+=te*le*V,V=Math.max(3,Math.min(50,V)),H()};return b.addEventListener("mousedown",Y),b.addEventListener("mousemove",_),b.addEventListener("mouseup",$),b.addEventListener("mouseleave",$),b.addEventListener("wheel",ne,{passive:!1}),()=>{b.removeEventListener("mousedown",Y),b.removeEventListener("mousemove",_),b.removeEventListener("mouseup",$),b.removeEventListener("mouseleave",$),b.removeEventListener("wheel",ne)}},fe=(z,b,Z,W,A)=>{const C=new St;b.forEach((V,H)=>{const Y=new ss(.8,20,20),_=W===H,$=S===H;let ne;_?ne=new et(16729156):$?ne=new et(16768256):ne=new et(4491519);const U=new uo({color:ne,transparent:!0,opacity:_?1:.85,shininess:_?100:30,emissive:_?new et(2228224):new et(0)}),le=new Je(Y,U);if(le.position.set(V[0],V[1],V[2]),le.userData={index:H,word:Z[H]},_){const te=new ss(1.2,16,16),ce=new dn({color:16729156,transparent:!0,opacity:.2,side:ho}),he=new Je(te,ce);he.position.set(V[0],V[1],V[2]),C.add(he)}C.add(le)}),g.current=C,z.add(C);const D=new St;P.current=D,b.forEach((V,H)=>{const Y=document.createElement("canvas"),_=Y.getContext("2d");Y.width=256,Y.height=64,_.fillStyle=A?"#ffffff":"#000000",_.font="20px Arial",_.textAlign="center",_.fillText(Z[H],128,35);const $=new fn(Y),ne=new mn({map:$,transparent:!0}),U=new ts(ne);U.position.set(V[0],V[1]+1,V[2]),U.scale.set(2,.5,1),D.add(U)}),z.add(D)},K=(z,b,Z,W,A)=>{const C=new St;return v.current=C,b.forEach((D,V)=>{const[H,Y,_]=D,$=new je(H,Y,_);if($.length()<.5)return;$.normalize();const U=1,le=new je(H,Y,_),te=le.clone(),ce=le.clone().add($.clone().multiplyScalar(U)),he=new lt().setFromPoints([te,ce]),Qe=W===V,Me=W!=null?Qe?.9:.4:.6,Re=new ct({color:16498468,transparent:!0,opacity:Me,linewidth:2}),Tt=new Ge(he,Re);C.add(Tt);const Zt=.05,Qt=.15,Jt=new no(Zt,Qt,6),Pe=new dn({color:16498468,transparent:!0,opacity:Me}),Fe=new Je(Jt,Pe);Fe.position.copy(ce),Fe.lookAt(ce.clone().add($)),C.add(Fe)}),z.add(C),C},ae=(z,b,Z,W)=>{const A=new St;if(w.current=A,W!==null&&Z&&b[W]){const C=b[W];Z.forEach(({index:D,sim:V})=>{if(b[D]){const H=b[D],Y=new lt().setFromPoints([new je(C[0],C[1],C[2]),new je(H[0],H[1],H[2])]);let _=16711680;V>.7?_=65280:V>.4?_=16776960:V>.1&&(_=16746496);const $=new ct({color:_,transparent:!0,opacity:.6}),ne=new Ge(Y,$);A.add(ne)}})}z.add(A)};return p.useEffect(()=>{if(console.log(" 3D useEffect triggered"),console.log(" Container ref:",!!o.current),console.log(" Vectors length:",t.length),console.log(" Words:",e),t.length===0){console.log(" No vectors available for 3D visualization yet");return}const z=()=>{if(console.log(" Checking container availability..."),!o.current){console.log(" Container ref still not available");return}console.log(" Container ref available:",o.current),console.log(" Container dimensions:",o.current.clientWidth,"x",o.current.clientHeight),console.log(" Starting 3D scene initialization...");try{const b=o.current,Z=b.clientWidth,W=b.clientHeight;if(console.log("Initializing 3D scene with",t.length,"vectors"),console.log("Container dimensions:",Z,"x",W),Z===0||W===0){console.log("Container has no dimensions, retrying in 100ms..."),setTimeout(()=>{o.current&&f(!0)},100);return}const A=new io;A.background=new et(r?657931:16777215),l.current=A;const C=new ro(75,Z/W,.1,1e3);C.position.set(10,10,10),C.lookAt(0,0,0),d.current=C;const D=new oo({antialias:!0,alpha:!0});D.setSize(Z,W),D.setPixelRatio(Math.min(window.devicePixelRatio,2)),c.current=D,b.innerHTML="",b.appendChild(D.domElement),console.log(" Creating 3D coordinates...");const V=J(t);console.log(" PCA analysis complete"),O(V),console.log(" Created coordinates for",V.coords.length,"points"),console.log("Adding coordinate axes and grid..."),ee(A,r),ve(A,r),console.log("Creating points and labels..."),fe(A,V.coords,e,s,r),console.log("Creating vector arrows..."),K(A,V.coords,t,s,r),console.log("Creating connections..."),ae(A,V.coords,a,s),console.log("Setting up interaction..."),x.current=new ao,T.current=new lo,console.log("Adding orbit controls...");const H=Ce(C,D.domElement),Y=xe(D.domElement,C,A);L.current=[H,Y],console.log("Adding lighting...");const _=new co(r?4210752:6316128,.6);A.add(_);const $=new un(16777215,.8);$.position.set(10,10,5),$.castShadow=!1,A.add($);const ne=new un(r?4474111:8956671,.3);ne.position.set(-10,-10,-5),A.add(ne),console.log("Starting animation loop...");const U=()=>{u.current=requestAnimationFrame(U),D.render(A,C)};U(),console.log("3D scene initialized successfully"),f(!1),y(null)}catch(b){console.error(" 3D visualization error:",b),console.error(" Error details:",b),y(b instanceof Error?b.message:"Failed to initialize 3D visualization"),f(!1)}};return o.current?z():(console.log(" Waiting for DOM to be ready..."),requestAnimationFrame(()=>{o.current?z():(console.log(" Still waiting, trying setTimeout..."),setTimeout(z,100))})),()=>{if(console.log("Cleaning up 3D scene..."),L.current.forEach(b=>b&&b()),L.current=[],u.current&&cancelAnimationFrame(u.current),g.current&&g.current.children.forEach(b=>{b instanceof Je&&(b.geometry.dispose(),b.material.dispose())}),P.current&&P.current.children.forEach(b=>{b instanceof ts&&(b.material.dispose(),b.material.map&&b.material.map.dispose())}),w.current&&w.current.children.forEach(b=>{b instanceof Ge&&(b.geometry.dispose(),b.material.dispose())}),v.current&&v.current.children.forEach(b=>{(b instanceof Ge||b instanceof Je)&&(b.geometry.dispose(),b.material.dispose())}),l.current&&l.current.clear(),c.current){c.current.dispose(),c.current.forceContextLoss();const b=c.current.getContext();b&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext()}}},[t,e,r]),p.useEffect(()=>{if(!g.current)return;g.current.children.forEach(b=>{var Z;if(b instanceof Je&&b.geometry instanceof ss){const W=(Z=b.userData)==null?void 0:Z.index;if(W!==void 0){const A=b.material;s===W?(A.color.setHex(16729156),A.opacity=1,A.shininess=100,A.emissive.setHex(2228224)):S===W?(A.color.setHex(16768256),A.opacity=.9,A.shininess=60,A.emissive.setHex(1118464)):(A.color.setHex(4491519),A.opacity=.85,A.shininess=30,A.emissive.setHex(0))}}})},[s,S]),p.useEffect(()=>{!l.current||!w.current||(l.current.remove(w.current),M&&ae(l.current,M.coords,a,s))},[a,t]),p.useEffect(()=>{!l.current||!v.current||(l.current.remove(v.current),M&&K(l.current,M.coords,t,s))},[s,r,M,t]),m?i.jsx("div",{className:"h-[600px] flex items-center justify-center text-red-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-2",children:" 3D Visualization Error"}),i.jsx("div",{className:"text-sm opacity-70",children:m})]})}):i.jsxs("div",{className:"relative h-[600px]",children:[i.jsx("div",{ref:o,className:"w-full h-full"}),t.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 rounded-lg",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx("div",{className:"mb-2",children:" Waiting for Embeddings..."}),i.jsx("div",{className:"text-sm opacity-70",children:"The 3D visualization will appear once the tokenizer processes the words"})]})}),t.length>0&&h&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 rounded-lg",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx("div",{className:"mb-2",children:" Loading 3D Space..."}),i.jsxs("div",{className:"text-sm opacity-70",children:["Projecting ",t.length," vectors into 3D"]})]})}),!h&&t.length>0&&i.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 rounded-lg p-2 text-xs",children:[i.jsx("div",{className:"text-white",children:" Drag to rotate   Click points   Scroll to zoom"}),i.jsx("div",{className:"text-white/70",children:" Selected   Hover   Others"})]}),!h&&M&&i.jsxs("div",{className:"absolute top-4 right-4 bg-black/50 rounded-lg p-3 text-xs max-w-xs",children:[i.jsx("div",{className:"text-white font-semibold mb-2",children:" 3D PCA Analysis"}),i.jsxs("div",{className:"space-y-1 text-white/90",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-red-400",children:"PC1 (X-axis):"}),i.jsxs("span",{children:[(M.varianceExplained[0]*100).toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-green-400",children:"PC2 (Y-axis):"}),i.jsxs("span",{children:[(M.varianceExplained[1]*100).toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-blue-400",children:"PC3 (Z-axis):"}),i.jsxs("span",{children:[(M.varianceExplained[2]*100).toFixed(1),"%"]})]}),i.jsx("div",{className:"border-t border-white/20 pt-1 mt-2",children:i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Total captured:"}),i.jsxs("span",{children:[(M.totalVariance*100).toFixed(1),"%"]})]})})]}),i.jsx("div",{className:"text-white/60 mt-2 text-[10px] leading-relaxed",children:"Closer points = more similar meanings. Each axis represents a principal component capturing the most variance in the 384D semantic space."})]}),!h&&S!==null&&i.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-yellow-500/90 text-black px-3 py-1 rounded-lg text-sm font-semibold",children:e[S]})]})}const ru=["hello my friend how are you?","The quick brown fox jumps over the lazy dog.","Machine learning and artificial intelligence are transforming our world.","Tokenization breaks text into subword units for language models."," Emojis and special characters pose interesting challenges! "],Ti=["bg-red-500/20 border-red-500/40","bg-blue-500/20 border-blue-500/40","bg-green-500/20 border-green-500/40","bg-yellow-500/20 border-yellow-500/40","bg-purple-500/20 border-purple-500/40","bg-pink-500/20 border-pink-500/40","bg-indigo-500/20 border-indigo-500/40","bg-orange-500/20 border-orange-500/40","bg-teal-500/20 border-teal-500/40","bg-cyan-500/20 border-cyan-500/40"];function ou({tokenizer:e,dark:t,modelInfo:s}){const[n,r]=p.useState("hello my friend how are you?"),[a,o]=p.useState([]),[l,c]=p.useState([]),[d,u]=p.useState(!1),[h,f]=p.useState(!1);p.useEffect(()=>{if(!e||!n.trim()){o([]),c([]);return}const v=setTimeout(()=>at(this,null,function*(){try{u(!0);const x=e.encode?e.encode(n):[],T=x.map(S=>{try{return e.decode?e.decode([S]):`[${S}]`}catch(R){return`[${S}]`}});o(T),c(x)}catch(x){console.error("Tokenization failed:",x),o([]),c([])}finally{u(!1)}}),300);return()=>clearTimeout(v)},[n,e]);const m=p.useMemo(()=>{const v=n.length,x=a.length,T=x>0?(v/x).toFixed(1):"0",S=x>0?((1-x/v)*100).toFixed(1):"0",L=new Set(l).size,M=s?(L/s.vocabularySize*100).toFixed(4):"0",O=l.length>0?Math.min(...l):0,J=l.length>0?Math.max(...l):0;return{characters:v,tokens:x,avgCharsPerToken:T,compressionRatio:parseFloat(S)>0?S:"0",uniqueTokens:L,vocabularyUsage:M,tokenIdRange:l.length>0?`${O}-${J}`:"N/A"}},[n,a,l,s]),y=v=>{r(v)},g=()=>{r(""),o([]),c([])},P=()=>{navigator.clipboard.writeText(JSON.stringify(l))},w=()=>{navigator.clipboard.writeText(JSON.stringify(a))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-semibold",children:" Interactive Tokenizer"}),i.jsx("button",{onClick:()=>f(!h),className:`p-1 rounded-lg transition ${t?"hover:bg-white/10":"hover:bg-black/10"}`,title:"Show/hide tokenization help",children:i.jsx(Wd,{size:16})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:w,className:`px-3 py-1.5 rounded-lg border text-sm transition ${t?"border-white/10 bg-white/5 hover:bg-white/10":"border-black/10 bg-black/5 hover:bg-black/10"}`,disabled:a.length===0,children:[i.jsx(ji,{size:12,className:"inline mr-1"}),"Copy Tokens"]}),i.jsxs("button",{onClick:P,className:`px-3 py-1.5 rounded-lg border text-sm transition ${t?"border-white/10 bg-white/5 hover:bg-white/10":"border-black/10 bg-black/5 hover:bg-black/10"}`,disabled:l.length===0,children:[i.jsx(ji,{size:12,className:"inline mr-1"}),"Copy IDs"]})]})]}),s&&i.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/20":"bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-purple-500/30"}`,children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:"font-semibold text-purple-300 flex items-center gap-2",children:" Model Information"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsx("div",{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"opacity-70",children:"Model:"}),i.jsx("span",{className:"font-semibold",children:s.name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"opacity-70",children:"Encoding:"}),i.jsx("span",{className:"font-mono text-blue-300",children:s.encoding})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"opacity-70",children:"Vocabulary Size:"}),i.jsxs("span",{className:"font-semibold text-green-300",children:[s.vocabularySize.toLocaleString()," tokens"]})]})]})}),i.jsx("div",{children:i.jsx("div",{className:"opacity-90 text-xs leading-relaxed",children:s.description})})]})]}),h&&i.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-blue-500/10 border-blue-500/20":"bg-blue-500/10 border-blue-500/30"}`,children:[i.jsx("div",{className:"font-semibold text-blue-300 mb-2",children:" What is Tokenization?"}),i.jsxs("div",{className:"text-sm space-y-2 opacity-90",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Tokenization"})," breaks text into smaller units (tokens) that language models can process.",s?`${s.name} uses`:"This model uses"," ",i.jsx("strong",{children:"Byte Pair Encoding (BPE)"})," which:"]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Splits words into subword pieces based on frequency"}),i.jsx("li",{children:"Handles unknown words by breaking them into known parts"}),i.jsx("li",{children:"Balances vocabulary size with semantic meaning"}),i.jsx("li",{children:"Uses special tokens like [CLS] (classification) and [SEP] (separator)"})]}),s&&i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[i.jsx("div",{className:"font-semibold text-purple-300 mb-2",children:" Model Details"}),i.jsxs("ul",{className:"space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Vocabulary:"})," ",s.vocabularySize.toLocaleString()," unique tokens"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Encoding:"})," ",s.encoding," (same as GPT-4 and GPT-3.5)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Token IDs:"})," Range from 0 to ",(s.vocabularySize-1).toLocaleString()]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Common tokens:"})," Lower IDs (0-999) = frequent words/characters"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Rare tokens:"})," Higher IDs = less frequent subwords and phrases"]})]})]}),i.jsx("p",{children:"Each token gets converted to a high-dimensional vector that captures its semantic meaning!"})]})]}),i.jsxs("div",{className:`rounded-lg border p-4 ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Text Input",d&&i.jsx("span",{className:"ml-2 text-xs opacity-60 animate-pulse",children:"Tokenizing..."})]}),i.jsx("textarea",{value:n,onChange:v=>r(v.target.value),placeholder:"Type or paste text here to see how it gets tokenized...",className:`w-full h-32 p-3 rounded-lg border resize-none focus:outline-none focus:ring-2 focus:ring-blue-400/50 ${t?"bg-white/10 border-white/10 text-white placeholder-white/50":"bg-white border-black/10 text-black placeholder-black/50"}`,style:{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas, monospace'}}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[i.jsxs("button",{onClick:g,className:`px-3 py-1.5 rounded-lg border text-sm transition flex items-center gap-1 ${t?"border-red-500/30 bg-red-500/10 hover:bg-red-500/20 text-red-300":"border-red-500/30 bg-red-500/10 hover:bg-red-500/20 text-red-600"}`,children:[i.jsx(qd,{size:12}),"Clear"]}),i.jsxs("div",{className:"text-xs opacity-60 flex items-center",children:[i.jsx(Xd,{size:12,className:"mr-1"}),"Examples:"]}),ru.map((v,x)=>i.jsxs("button",{onClick:()=>y(v),className:`px-3 py-1.5 rounded-lg border text-xs transition ${t?"border-white/10 bg-white/5 hover:bg-white/10":"border-black/10 bg-black/5 hover:bg-black/10"}`,children:[v.substring(0,25),v.length>25?"...":""]},x))]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{className:`p-3 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsx("div",{className:"text-sm opacity-70",children:"Characters"}),i.jsx("div",{className:"text-xl font-semibold",children:m.characters})]}),i.jsxs("div",{className:`p-3 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsx("div",{className:"text-sm opacity-70",children:"Tokens"}),i.jsx("div",{className:"text-xl font-semibold",children:m.tokens})]}),i.jsxs("div",{className:`p-3 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsx("div",{className:"text-sm opacity-70",children:"Unique Tokens"}),i.jsx("div",{className:"text-xl font-semibold text-blue-300",children:m.uniqueTokens})]}),i.jsxs("div",{className:`p-3 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsx("div",{className:"text-sm opacity-70",children:"Chars/Token"}),i.jsx("div",{className:"text-xl font-semibold",children:m.avgCharsPerToken})]}),i.jsxs("div",{className:`p-3 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsx("div",{className:"text-sm opacity-70",children:"Compression"}),i.jsxs("div",{className:"text-xl font-semibold",children:[m.compressionRatio,"%"]})]}),i.jsxs("div",{className:`p-3 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,title:"Percentage of model vocabulary used",children:[i.jsx("div",{className:"text-sm opacity-70",children:"Vocab Usage"}),i.jsxs("div",{className:"text-lg font-semibold text-green-300",children:[m.vocabularyUsage,"%"]})]})]}),s&&a.length>0&&i.jsxs("div",{className:`p-4 rounded-lg border ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsx("div",{className:"font-semibold mb-3 flex items-center gap-2",children:" Vocabulary Analysis"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"opacity-70",children:"Token ID Range:"}),i.jsx("span",{className:"font-mono text-blue-300",children:m.tokenIdRange})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"opacity-70",children:"Vocabulary Usage:"}),i.jsxs("span",{className:"text-green-300 font-semibold",children:[m.uniqueTokens," / ",s.vocabularySize.toLocaleString()]})]}),i.jsx("div",{className:`w-full h-2 rounded-full ${t?"bg-white/10":"bg-black/10"} overflow-hidden`,children:i.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${Math.min(parseFloat(m.vocabularyUsage)*1e3,100)}%`}})}),i.jsx("div",{className:"text-xs opacity-60 mt-1",children:parseFloat(m.vocabularyUsage)<.001?"Using a tiny fraction of the model's vocabulary":`${m.vocabularyUsage}% of vocabulary utilized`})]})]})]}),a.length>0&&i.jsxs("div",{className:`rounded-lg border p-4 ${t?"border-white/10 bg-white/5":"border-black/10 bg-black/5"}`,children:[i.jsxs("div",{className:"font-semibold mb-3 flex items-center gap-2",children:[" Token Visualization",i.jsxs("span",{className:"text-xs opacity-60",children:["(",a.length," tokens)"]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.map((v,x)=>{const T=l[x],S=Ti[x%Ti.length],R=v.startsWith("[")&&v.endsWith("]");let L="regular",M="Regular",O="text-gray-300";return R?(L="special",M="Special",O="text-yellow-300"):T<1e3?(L="common",M="Common",O="text-green-300"):T<1e4?(L="frequent",M="Frequent",O="text-blue-300"):T<5e4?(L="normal",M="Normal",O="text-purple-300"):(L="rare",M="Rare",O="text-orange-300"),i.jsxs("div",{className:`px-2 py-1.5 rounded-lg border text-sm transition-all hover:scale-105 ${S} ${R?"ring-2 ring-yellow-400/50":""}`,title:`Token ${x+1}: "${v}" (ID: ${T})
Type: ${M}
Frequency: ${L==="common"?"Very high":L==="frequent"?"High":L==="normal"?"Medium":L==="rare"?"Low":"Special token"}`,children:[i.jsxs("div",{className:"font-mono text-sm font-semibold",children:[v.replace(//g,"")," "]}),i.jsxs("div",{className:"text-xs text-center mt-1 space-y-0.5",children:[i.jsxs("div",{className:"opacity-70",children:["#",T]}),i.jsx("div",{className:`text-[10px] font-semibold ${O}`,children:M})]})]},x)})}),i.jsxs("div",{className:"border-t pt-4 mt-4 border-white/10",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:" Token Frequency Classification:"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-green-500/30 border border-green-500/50"}),i.jsx("span",{className:"text-green-300",children:"Common (0-999)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-blue-500/30 border border-blue-500/50"}),i.jsx("span",{className:"text-blue-300",children:"Frequent (1K-10K)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-purple-500/30 border border-purple-500/50"}),i.jsx("span",{className:"text-purple-300",children:"Normal (10K-50K)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-orange-500/30 border border-orange-500/50"}),i.jsx("span",{className:"text-orange-300",children:"Rare (50K+)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500/30 border border-yellow-500/50"}),i.jsx("span",{className:"text-yellow-300",children:"Special"})]})]})]}),i.jsxs("div",{className:"border-t pt-4 mt-4 border-white/10",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:"Token IDs Array:"}),i.jsxs("div",{className:`p-3 rounded-lg font-mono text-sm break-all ${t?"bg-black/20":"bg-white/50"}`,children:["[",l.join(", "),"]"]})]}),a.some(v=>v.startsWith("[")&&v.endsWith("]"))&&i.jsxs("div",{className:"border-t pt-4 mt-4 border-white/10",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:" Special Tokens:"}),i.jsxs("div",{className:"text-xs opacity-80 space-y-1",children:[i.jsxs("div",{children:[" ",i.jsx("strong",{children:"[CLS]"}),": Classification token (start of sequence)"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"[SEP]"}),": Separator token (between sentences)"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"[UNK]"}),": Unknown token (out-of-vocabulary)"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"[PAD]"}),": Padding token (for batch processing)"]})]})]})]})]})}function au(e,t=4,s=10){if(e.length===0)return{labels:[],centers:[]};const n=e.length,r=[];for(let o=0;o<t&&o<n;o++)r.push([...e[o]]);const a=new Array(n).fill(0);for(let o=0;o<s;o++){for(let d=0;d<n;d++){let u=0,h=1/0;for(let f=0;f<r.length;f++){const m=e[d][0]-r[f][0],y=e[d][1]-r[f][1],g=m*m+y*y;g<h&&(h=g,u=f)}a[d]=u}const l=r.map(()=>[0,0]),c=r.map(()=>0);for(let d=0;d<n;d++){const u=a[d];l[u][0]+=e[d][0],l[u][1]+=e[d][1],c[u]+=1}for(let d=0;d<r.length;d++)c[d]>0&&(r[d][0]=l[d][0]/c[d],r[d][1]=l[d][1]/c[d])}return{labels:a,centers:r}}function lu(e,t,s,n=40){if(e.length===0)return[];let r=1/0,a=-1/0,o=1/0,l=-1/0;for(const[f,m]of e)f<r&&(r=f),f>a&&(a=f),m<o&&(o=m),m>l&&(l=m);const c=a-r||1,d=l-o||1,u=t-n*2,h=s-n*2;return e.map(([f,m])=>[n+(f-r)/c*u,n+(m-o)/d*h])}function cu(){var tn,sn,nn,rn;const[e,t]=p.useState(()=>wi.slice(0,16)),[s,n]=p.useState("hello my friend how are you?"),[r,a]=p.useState("umap"),[o,l]=p.useState(!0),[c]=p.useState(!1),[d,u]=p.useState(2),[h,f]=p.useState(.15),[m,y]=p.useState(12),[g,P]=p.useState("gallery"),[w,v]=p.useState(!0),[x,T]=p.useState(null),[S,R]=p.useState(""),[L,M]=p.useState(""),[O,J]=p.useState(!1),[ee,ve]=p.useState(!1),[xe,Ce]=p.useState(null),[fe,K]=p.useState(null),[ae,z]=p.useState(null),[b,Z]=p.useState({}),[W,A]=p.useState(null),[C,D]=p.useState(""),[V,H]=p.useState([]),[Y,_]=p.useState([]),[$,ne]=p.useState(null);p.useEffect(()=>{if(!c)return;const j=setInterval(()=>{const N=wi.filter(F=>!e.includes(F));if(N.length===0)return;const E=N[Math.floor(Math.random()*N.length)];t(F=>F.includes(E)?F:[...F,E])},1400);return()=>clearInterval(j)},[c,e]),p.useEffect(()=>{(()=>at(this,null,function*(){try{const{encode:N,decode:E,vocabularySize:F}=yield jo(()=>import("./tokenizer-b1eafbbb.js"),[]);ne({encode:N,decode:E,vocabularySize:F}),console.log(" Fallback tokenizer loaded successfully!")}catch(N){console.error("Failed to load fallback tokenizer:",N)}}))()},[]),p.useEffect(()=>{const j=setTimeout(()=>{Zt(s)},300);return()=>clearTimeout(j)},[s,fe,ae,$]),p.useEffect(()=>{if(!$)return;let j=!1;return at(this,null,function*(){var N;for(const E of e){if(j)return;if(!((N=b[E])!=null&&N.tokens))try{const F=$.encode(E),I=F.map(G=>{try{return $.decode([G])}catch(re){return`[${G}]`}}),se=F,X=new Float32Array(384);for(let G=0;G<se.length&&G<10;G++){const re=se[G];for(let de=0;de<384;de++){const Ae=re*1e3+de;X[de]+=Math.sin(Ae*.01)*Math.cos(Ae*.003)*(1/(G+1))}}let me=0;for(let G=0;G<384;G++)me+=X[G]*X[G];me=Math.sqrt(me)||1;for(let G=0;G<384;G++)X[G]/=me;if(j)return;Z(G=>q(k({},G),{[E]:{vec:X,tokens:I,tokenIds:se}}))}catch(F){console.error("Token processing failed for",E,F)}}}),()=>{j=!0}},[$,e,b]);const U=p.useMemo(()=>e.map(j=>{var F;if((F=b[j])!=null&&F.vec)return b[j].vec;const N=new Float32Array(384);for(let I=0;I<384;I++)N[I]=(Math.random()-.5)*.001;let E=0;for(let I=0;I<384;I++)E+=N[I]*N[I];E=Math.sqrt(E)||1;for(let I=0;I<384;I++)N[I]/=E;return N}),[e,b]),le=p.useMemo(()=>{var N,E;if(e.length===0)return[];const j=U.map(F=>Array.from(F));if(j.length<3)return j.map((F,I)=>[I*30,I*30]);try{return r==="pca"?new ki(j).predict(j,{nComponents:2}).to2DArray():new so.UMAP({nNeighbors:Math.max(2,Math.min(m,j.length-1)),minDist:h,nComponents:2}).fit(j)}catch(F){let I=function(re){const de=Math.sin(se+re)*1e4;return de-Math.floor(de)};const se=1337,X=(E=(N=j[0])==null?void 0:N.length)!=null?E:64,me=Array.from({length:X},(re,de)=>I(de)-.5),G=Array.from({length:X},(re,de)=>I(de+17)-.5);return U.map(re=>[Vs(re,me),Vs(re,G)])}},[U,r,h,m,e.length]),te=980,ce=560,he=p.useMemo(()=>lu(le,te,ce,50),[le]),{labels:Qe}=p.useMemo(()=>au(he,Math.min(5,Math.max(2,Math.floor(Math.sqrt(Math.max(1,he.length)/3))))),[he]),Me=p.useMemo(()=>tu(U,d),[U,d]);function Re(){const j=s.trim();if(j){if(e.map(N=>N.toLowerCase()).includes(j.toLowerCase())){n(""),T(e.findIndex(N=>N.toLowerCase()===j.toLowerCase()));return}t([...e,j]),T(e.length),n("")}}function Tt(){K(null),z(null),Ce(null),ve(!1)}function Zt(j){return at(this,null,function*(){if(console.log(" getPreviewEmbedding called:",{text:j,hasExtractor:!!fe,hasFallback:!!$}),!j.trim()){console.log(" Clearing preview - empty text"),A(null),D(""),H([]),_([]);return}if(!$){console.log(" Waiting for GPT-4 tokenizer to load...");return}try{console.log(" Using GPT-4 tokenizer for preview...");const N=$.encode(j),E=N.map(X=>{try{return $.decode([X])}catch(me){return`[${X}]`}}),F=N;console.log(" GPT-4 tokenization successful! Tokens:",E,"IDs:",F);const I=new Float32Array(384);for(let X=0;X<F.length&&X<10;X++){const me=F[X];for(let G=0;G<384;G++){const re=me*1e3+G;I[G]+=Math.sin(re*.01)*Math.cos(re*.003)*(1/(X+1))}}let se=0;for(let X=0;X<384;X++)se+=I[X]*I[X];se=Math.sqrt(se)||1;for(let X=0;X<384;X++)I[X]/=se;console.log(" Token-based embedding generated!"),A(I),D(j),H(E),_(F)}catch(N){console.error(" GPT-4 tokenization failed:",N)}})}function Qt(j){const N=gs[j];N&&(t(N.words),T(null))}function Jt(){t([]),T(null)}p.useEffect(()=>{R(fe&&ae?"Tokenizer loaded successfully":ee?"Loading tokenizer...":xe?"Model loading failed":"Initializing...")},[fe,ae,ee,xe]);const Pe=p.useMemo(()=>x==null?null:(Me[x]||[]).map(({j:N,s:E})=>({index:N,sim:E})).sort((N,E)=>E.sim-N.sim),[Me,x]);p.useEffect(()=>{if(!L)return;const j=e.findIndex(N=>N.toLowerCase()===L.toLowerCase());j>=0&&T(j)},[L,e]);const Fe={x:te/2,y:ce/2};return i.jsxs("div",{className:`min-h-screen ${o?"text-zinc-100 bg-zinc-950":"text-zinc-900 bg-zinc-100"} p-3 sm:p-6 font-sans overflow-x-hidden`,children:[i.jsx(Qd,{dark:o}),i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("header",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"rounded-2xl px-3 py-1.5 bg-gradient-to-r from-pink-500/80 to-violet-500/80 text-white text-sm shadow",children:"Museum of Words"}),i.jsx("div",{className:"hidden sm:flex items-center gap-2 text-sm opacity-80",children:i.jsx("span",{children:"Add words & phrases  see clusters."})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"rounded-xl border px-3 py-2 text-sm backdrop-blur bg-white/5 border-white/10 hover:bg-white/10 transition",onClick:()=>l(j=>!j),title:o?"Switch to Light":"Switch to Dark",children:o?i.jsx(Yd,{size:16}):i.jsx(Hd,{size:16})}),i.jsxs("button",{className:"rounded-xl border px-3 py-2 text-sm backdrop-blur bg-white/5 border-white/10 hover:bg-white/10 transition flex items-center gap-2",onClick:()=>J(!0),children:[i.jsx(Yr,{size:16})," Help"]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2 rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("input",{value:s,onChange:j=>n(j.target.value),onKeyDown:j=>j.key==="Enter"&&Re(),placeholder:"Type a word or phrase",className:"min-w-0 w-full sm:min-w-[260px] sm:w-auto flex-1 rounded-xl px-3 py-2 bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-violet-400/50"}),i.jsxs("button",{onClick:Re,disabled:ee,className:"inline-flex items-center gap-2 rounded-xl px-3 py-2 bg-violet-500/90 hover:bg-violet-500 disabled:bg-gray-500/50 disabled:cursor-not-allowed text-white shadow",children:[i.jsx(_d,{size:16})," ",ee?"Loading...":"Hang it"]})]}),!$&&i.jsx("div",{className:"mt-3 p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:i.jsx("div",{className:"text-xs text-yellow-300 animate-pulse",children:" Loading GPT-4 tokenizer... (for real-time token preview)"})}),$&&(s||C)&&i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[i.jsxs("div",{className:"text-xs font-semibold mb-2 text-green-300 flex items-center gap-2",children:[' Live Tokenization: "',C,'"',i.jsxs("span",{className:"opacity-60",children:["(",V.length," tokens)"]}),i.jsx("span",{className:"px-2 py-1 rounded bg-orange-500/20 text-orange-200 text-[10px]",children:"GPT-4"}),i.jsx("span",{className:"px-2 py-1 rounded bg-green-500/20 text-green-200 text-[10px]",children:"Token-Vec"})]}),i.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:V.map((j,N)=>{const E=["bg-red-500/20 border-red-500/40 text-red-200","bg-blue-500/20 border-blue-500/40 text-blue-200","bg-green-500/20 border-green-500/40 text-green-200","bg-yellow-500/20 border-yellow-500/40 text-yellow-200","bg-purple-500/20 border-purple-500/40 text-purple-200","bg-pink-500/20 border-pink-500/40 text-pink-200","bg-indigo-500/20 border-indigo-500/40 text-indigo-200","bg-orange-500/20 border-orange-500/40 text-orange-200"],F=E[N%E.length],I=j.startsWith("[")&&j.endsWith("]");return i.jsxs("div",{className:`px-2 py-1 rounded-md border text-xs font-mono ${F} ${I?"ring-1 ring-yellow-400/50":""}`,title:`Token ${N+1}: "${j}" (ID: ${Y[N]})`,children:[i.jsx("div",{className:"font-mono text-xs",children:j.replace(//g,"").replace(/ /g,"")}),i.jsxs("div",{className:"text-[10px] opacity-60 text-center",children:["#",Y[N]]})]},N)})}),i.jsxs("div",{className:"text-[10px] opacity-60 font-mono",children:["IDs: [",Y.join(", "),"]"]})]}),W&&i.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[i.jsx("div",{className:"text-xs opacity-70 mb-1",children:" Live Embedding"}),i.jsxs("div",{className:"text-xs font-mono opacity-90 mb-1",children:["Vector: [",Array.from(W.slice(0,8)).map(j=>j.toFixed(3)).join(", "),"...]"]}),i.jsxs("div",{className:"text-xs opacity-60",children:["Magnitude: ",Math.sqrt(W.reduce((j,N)=>j+N*N,0)).toFixed(3)," | Top similarity: ",U.length>0&&W?Math.max(...U.map(j=>!j||!W?-1:j.reduce((N,E,F)=>N+E*W[F],0))).toFixed(3):"N/A"]})]})]}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-gradient-to-r from-violet-500/10 to-pink-500/10 border border-violet-500/20",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-xs font-semibold opacity-90 block sm:inline mb-2 sm:mb-0 sm:mr-2",children:" Semantic Presets:"}),i.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 -webkit-overflow-scrolling-touch scrollbar-hide",children:i.jsxs("div",{className:"flex gap-1 min-w-max",children:[Object.keys(gs).map(j=>i.jsx("button",{onClick:()=>Qt(j),className:"text-xs px-3 py-2 rounded-lg bg-violet-500/20 hover:bg-violet-500/30 border border-violet-500/30 transition-colors whitespace-nowrap touch-manipulation",title:gs[j].description,children:j},j)),i.jsx("button",{onClick:Jt,className:"text-xs px-3 py-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 transition-colors text-red-300 whitespace-nowrap touch-manipulation",title:"Remove all words from the gallery",children:"Clear All"})]})})]}),i.jsx("div",{className:"text-xs opacity-60",children:"Choose curated word sets to explore different types of semantic relationships, or clear everything to start fresh."})]}),i.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-gradient-to-r from-blue-500/10 to-green-500/10 border border-blue-500/20",children:[i.jsxs("div",{className:"text-xs font-semibold mb-1 text-blue-300",children:[" Why ",r.toUpperCase(),"?"]}),i.jsxs("div",{className:"text-xs opacity-90 space-y-1",children:[r==="umap"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Non-linear projection:"})," Discovers hidden patterns that linear methods miss"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Preserves neighborhoods:"})," Words with similar meanings cluster together naturally"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Global topology:"})," Maintains the overall shape of semantic relationships"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Fast & scalable:"})," Works well even with thousands of words"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Linear projection:"})," Shows the main directions of variance in meaning space"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Interpretable axes:"})," Each dimension has clear mathematical meaning"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Global structure:"})," Preserves overall distances between word groups"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Deterministic:"})," Same result every time, no randomness"]})]}),i.jsxs("div",{className:"mt-1 pt-1 border-t border-white/10",children:[i.jsx("strong",{children:"Try switching methods"})," to see how the same words organize differently!"]})]})]}),i.jsx("div",{className:"mt-2 text-xs opacity-80",children:ee?i.jsx("span",{children:"Loading tokenizer initializing GPT-4 tokenization system."}):xe?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-red-300",children:xe}),i.jsx("button",{onClick:Tt,className:"self-start rounded-lg px-2 py-1 bg-red-500/20 hover:bg-red-500/30 text-red-300 text-xs border border-red-500/30",children:"Retry Loading"})]}):i.jsxs("span",{children:["Using ",i.jsx("span",{className:"font-semibold",children:"GPT-4 Tokenizer"})," with token-based embeddings. Tokens shown in the Spotlight."]})}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[i.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"opacity-70 whitespace-nowrap",children:"Projection"}),i.jsxs("div",{className:"flex gap-1 rounded-xl overflow-hidden border border-white/10 flex-shrink-0",children:[i.jsxs("button",{onClick:()=>a("umap"),className:`px-2 sm:px-3 py-1 text-xs sm:text-sm ${r==="umap"?"bg-white/20":"bg-transparent"}`,title:"UMAP: Non-linear, preserves clusters and neighborhoods. Great for discovering semantic groups.",children:[i.jsx(Gd,{className:"inline mr-1",size:12}),"UMAP"]}),i.jsxs("button",{onClick:()=>a("pca"),className:`px-2 sm:px-3 py-1 text-xs sm:text-sm ${r==="pca"?"bg-white/20":"bg-transparent"}`,title:"PCA: Linear, shows main variance directions. Good for understanding dominant patterns.",children:[i.jsx(Ud,{className:"inline mr-1",size:12}),"PCA"]})]})]}),i.jsxs("label",{className:"flex items-center gap-2 min-w-0",title:"How many neighbor links per node to draw.",children:[i.jsx("span",{className:"opacity-70 whitespace-nowrap",children:"Links / node"}),i.jsx("input",{type:"range",min:1,max:5,value:d,onChange:j=>u(parseInt(j.target.value)),className:"flex-1 min-w-0"}),i.jsx("span",{className:"w-6 text-right flex-shrink-0",children:d})]})]}),i.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row items-start sm:items-center gap-3 text-sm",children:[i.jsx("button",{onClick:()=>v(j=>!j),className:"rounded-xl px-3 py-1.5 border border-white/10 bg-white/10 hover:bg-white/20 whitespace-nowrap",children:w?"Show advanced":"Hide advanced"}),!w&&i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full sm:flex-1",children:[i.jsxs("label",{className:"flex items-center gap-2 min-w-0",title:"UMAP: number of nearby points considered when laying out.",children:[i.jsx("span",{className:"opacity-70 whitespace-nowrap text-xs",children:"UMAP nNeighbors"}),i.jsx("input",{type:"range",min:4,max:30,value:m,onChange:j=>y(parseInt(j.target.value)),className:"flex-1 min-w-0"}),i.jsx("span",{className:"w-8 text-right text-xs flex-shrink-0",children:m})]}),i.jsxs("label",{className:"flex items-center gap-2 min-w-0",title:"UMAP: how tightly points pack into clusters (lower = tighter).",children:[i.jsx("span",{className:"opacity-70 whitespace-nowrap text-xs",children:"UMAP minDist"}),i.jsx("input",{type:"range",min:.05,max:.8,step:.05,value:h,onChange:j=>f(parseFloat(j.target.value)),className:"flex-1 min-w-0"}),i.jsx("span",{className:"w-10 text-right text-xs flex-shrink-0",children:h.toFixed(2)})]})]}),i.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto sm:ml-auto",children:[i.jsx(Kd,{size:14,className:"flex-shrink-0"}),i.jsx("input",{value:L,onChange:j=>M(j.target.value),placeholder:"Find/select word",className:"rounded-xl px-3 py-1.5 bg-white/10 border border-white/10 min-w-0 flex-1 sm:w-auto"})]})]})]}),i.jsxs("div",{className:"rounded-2xl p-4 border border-white/10 bg-white/5 backdrop-blur",children:[i.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Spotlight"}),x!=null?i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"opacity-70",children:"Phrase"}),": ",i.jsx("span",{className:"font-semibold",children:e[x]})]}),i.jsxs("div",{className:"mb-3 p-2 rounded-lg bg-white/5 border border-white/10",children:[i.jsx("div",{className:"opacity-70 text-xs mb-1",children:"Vector (384D)"}),i.jsxs("div",{className:"text-xs font-mono opacity-90 mb-1",children:["[",U[x]?Array.from(U[x].slice(0,6)).map(j=>j.toFixed(3)).join(", "):"","...]"]}),i.jsxs("div",{className:"text-xs opacity-60",children:["Magnitude: ",U[x]?Math.sqrt(U[x].reduce((j,N)=>j+N*N,0)).toFixed(3):"N/A"]})]}),i.jsx("div",{className:"opacity-70 mb-1",children:"Nearest neighbors (cosine similarity)"}),i.jsx("ul",{className:"space-y-1 mb-2",children:(Pe||[]).map(({index:j,sim:N},E)=>{const F=N,I=Math.acos(Math.max(-1,Math.min(1,F)))*(180/Math.PI);let se="text-red-400";return F>.7?se="text-green-400":F>.4?se="text-yellow-400":F>.1&&(se="text-orange-400"),i.jsxs("li",{className:"flex justify-between items-center",children:[i.jsx("span",{children:e[j]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`font-semibold ${se}`,children:N.toFixed(3)}),i.jsxs("span",{className:"opacity-50 text-xs ml-1",children:["(",I.toFixed(0),")"]})]})]},E)})}),Pe&&Pe.length>0&&i.jsxs("div",{className:"mb-3 p-2 rounded bg-blue-500/10 border border-blue-500/20",children:[i.jsx("div",{className:"text-xs font-semibold mb-1 text-blue-300",children:" Why these connections?"}),i.jsxs("div",{className:"text-xs opacity-80 space-y-1",children:[Pe[0].sim>.7&&i.jsxs("div",{children:[" ",i.jsx("strong",{children:"High similarity:"})," Likely synonyms or very related concepts"]}),Pe[0].sim>.4&&Pe[0].sim<=.7&&i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Category similarity:"})," Same domain or semantic field"]}),Pe[0].sim>.1&&Pe[0].sim<=.4&&i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Contextual connection:"})," Appear in similar settings or stories"]}),Pe.some(j=>j.sim<=.1)&&i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Weak/no connection:"})," Different semantic domains"]}),i.jsxs("div",{children:[" ",i.jsx("strong",{children:"Cultural patterns:"})," GPT-4 learned from vast text corpora"]})]})]}),i.jsx("div",{className:"text-xs opacity-60 mb-2",children:" Cosine measures vector angle: 1.0=identical, 0.0=unrelated, -1.0=opposite"}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"opacity-70 mb-1",children:"Tokens (BPE) & IDs"}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[(((tn=b[e[x]])==null?void 0:tn.tokens)||[]).map((j,N)=>{var E,F;return i.jsxs("div",{className:"px-2 py-1 rounded-lg border border-white/10 bg-white/10 text-xs",children:[i.jsx("span",{className:"font-mono",children:j}),i.jsxs("span",{className:"opacity-60 ml-1",children:["#",(F=(E=b[e[x]])==null?void 0:E.tokenIds)==null?void 0:F[N]]})]},N)}),(!((sn=b[e[x]])!=null&&sn.tokens)||((rn=(nn=b[e[x]])==null?void 0:nn.tokens)==null?void 0:rn.length)===0)&&i.jsx("div",{className:"text-xs opacity-60",children:"(tokens will appear after the model finishes loading)"})]})]})]}):i.jsx("div",{className:"text-sm opacity-70",children:"Click a placard to see its neighbors and tokens."}),i.jsx("div",{className:"mt-4 text-sm opacity-80",children:"Exhibit Stats"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-1",children:[i.jsxs("div",{className:"rounded-xl p-3 bg-white/5 border border-white/10",children:[i.jsx("div",{className:"opacity-70",children:"Pieces"}),i.jsx("div",{className:"text-xl font-semibold",children:e.length})]}),i.jsxs("div",{className:"rounded-xl p-3 bg-white/5 border border-white/10",children:[i.jsx("div",{className:"opacity-70",children:"Projection"}),i.jsx("div",{className:"text-xl font-semibold uppercase",children:r})]}),i.jsxs("div",{className:"rounded-xl p-3 bg-white/5 border border-white/10",children:[i.jsx("div",{className:"opacity-70",children:"Links / node"}),i.jsx("div",{className:"text-xl font-semibold",children:d})]}),i.jsxs("div",{className:"rounded-xl p-3 bg-white/5 border border-white/10",children:[i.jsx("div",{className:"opacity-70",children:"Engine"}),i.jsx("div",{className:"text-xl font-semibold",children:"GPT-4"})]})]}),i.jsx("div",{className:"mt-2 text-xs opacity-70",children:S})]})]}),i.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-white/10",children:[i.jsx("button",{className:`px-4 py-2 rounded-xl ${g==="gallery"?"bg-white/10":"bg-transparent"}`,onClick:()=>P("gallery"),children:"Gallery wall"}),i.jsx("button",{className:`px-4 py-2 rounded-xl ${g==="matrix"?"bg-white/10":"bg-transparent"}`,onClick:()=>P("matrix"),children:"Matrix room"}),i.jsx("button",{className:`px-4 py-2 rounded-xl ${g==="3d"?"bg-white/10":"bg-transparent"}`,onClick:()=>P("3d"),children:"3D Space"}),i.jsx("button",{className:`px-4 py-2 rounded-xl ${g==="tokenizer"?"bg-white/10":"bg-transparent"}`,onClick:()=>P("tokenizer"),children:"Tokenizer"})]}),g==="gallery"&&i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-6 rounded-[28px] pointer-events-none shadow-[inset_0_0_0_2px_rgba(255,255,255,0.04),_0_40px_80px_-40px_rgba(0,0,0,0.5)]"}),i.jsxs("svg",{viewBox:`0 0 ${te} ${ce}`,className:"w-full h-[400px] sm:h-[560px] block",style:{clipPath:"inset(0)"},children:[i.jsxs("defs",{children:[i.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:i.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:o?"#ffffff10":"#00000010",strokeWidth:"1"})}),i.jsx("clipPath",{id:"svgClip",children:i.jsx("rect",{x:"0",y:"0",width:te,height:ce})})]}),i.jsx("rect",{x:"0",y:"0",width:te,height:ce,fill:"url(#grid)"}),he.map(([j,N],E)=>x!=null&&E!==x?null:((x!=null?Me[x]:Me[E])||[]).map(({j:I,s:se},X)=>{const[me,G]=he[I],re=x!=null,de=re?Math.max(.25,Math.min(1,se-.1)):Math.max(0,se-.2)*.6,Ae=re?Math.max(1.5,4*de):Math.max(1,3*de);return i.jsx("line",{x1:j,y1:N,x2:me,y2:G,stroke:o?"#ffffff50":"#00000050",strokeOpacity:de,strokeWidth:Ae},`l-${E}-${I}-${X}`)})),i.jsx("g",{clipPath:"url(#svgClip)",children:he.map(([j,N],E)=>{const F=j-Fe.x,I=N-Fe.y,se=Math.sqrt(F*F+I*I);if(se<5)return null;const X=window.innerWidth<640?15:20,me=F/se*X,G=I/se*X;let re=j+me,de=N+G;const Ae=10;re=Math.max(Ae,Math.min(te-Ae,re)),de=Math.max(Ae,Math.min(ce-Ae,de));const on=x!=null?x===E?.9:.4:.6;return i.jsxs("g",{children:[i.jsx("line",{x1:j,y1:N,x2:re,y2:de,stroke:"#fbbf24",strokeOpacity:on,strokeWidth:2,strokeLinecap:"round"}),i.jsx("circle",{cx:re,cy:de,r:window.innerWidth<640?1.5:2,fill:"#fbbf24",opacity:on})]},`vector-${E}`)})}),i.jsx(Id,{children:he.map(([j,N],E)=>{const{width:F,height:I,fontSize:se,text:X,padX:me}=su(e[E]),G=x===E,re=G?1.08:1;return i.jsxs(Vd.g,{initial:{x:Fe.x,y:Fe.y,opacity:0},animate:{x:j,y:N,opacity:x==null||G?1:.25,scale:re},exit:{opacity:0},transition:{type:"spring",stiffness:120,damping:18},onClick:()=>{T(E),n(e[E])},style:{cursor:"pointer"},children:[G&&i.jsx("circle",{cx:0,cy:0,r:30,fill:"none",stroke:Vt[Qe[E]%Vt.length],strokeOpacity:.6,strokeWidth:2}),i.jsx("rect",{x:-F/2,y:-I/2,width:F,height:I,rx:10,fill:o?"#0b0b0c":"#ffffff",stroke:o?"#ffffff20":"#00000010"}),i.jsx("rect",{x:-F/2,y:-I/2,width:6,height:I,rx:10,fill:Vt[Qe[E]%Vt.length]}),i.jsx("text",{x:-F/2+me+6,y:4,fontSize:se,fill:o?"#e5e7eb":"#111827",fontWeight:G?700:600,children:X}),i.jsxs("text",{x:-F/2+me+6,y:18,fontSize:10,fill:o?"#9ca3af":"#4b5563",children:["#",E+1]})]},e[E])})}),x!=null&&i.jsxs("g",{children:[i.jsx("rect",{x:20,y:ce-44,width:te-40,height:28,rx:8,fill:o?"#ffffff10":"#00000008"}),i.jsx("text",{x:32,y:ce-25,fontSize:14,fill:o?"#e5e7eb":"#111827",children:e[x]})]})]})]}),g==="matrix"&&i.jsxs("div",{className:"p-4 overflow-x-auto",children:[i.jsx("div",{className:"mb-3 text-sm opacity-80",children:"Cosine similarity heatmap  hover a cell for values."}),i.jsx(nu,{words:e,vectors:U,dark:o})]}),g==="3d"&&i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"mb-3 text-sm opacity-80",children:" Explore semantic relationships in 3D space. Words with similar meanings cluster together."}),i.jsx(iu,{words:e,vectors:U,selected:x,onSelect:T,dark:o,neighbors:d,selectedNeighbors:Pe})]}),g==="tokenizer"&&i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"mb-3 text-sm opacity-80",children:" See how text is broken down into tokens that get converted to embeddings. Try typing different phrases!"}),ae||$?i.jsx(ou,{tokenizer:ae||$,dark:o,modelInfo:{name:"GPT-4 Tokenizer",encoding:"cl100k_base",vocabularySize:($==null?void 0:$.vocabularySize)||(ae==null?void 0:ae.vocabularySize)||100257,description:"Byte Pair Encoding (BPE) tokenizer used by GPT-4 and GPT-3.5 models"}}):ee?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-pulse text-lg opacity-70",children:"Loading tokenizer..."}),i.jsx("div",{className:"text-sm opacity-60 mt-2",children:"The tokenizer will be available once it initializes."})]}):xe?i.jsxs("div",{className:"text-center py-8",children:[i.jsxs("div",{className:"text-red-300 mb-4",children:["Tokenizer unavailable: ",xe]}),i.jsx("button",{onClick:Tt,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 border border-red-500/30 rounded-lg",children:"Retry Loading Model"})]}):i.jsx("div",{className:"text-center py-8 opacity-70",children:i.jsx("div",{children:"Tokenizer initializing..."})})]})]}),i.jsxs("footer",{className:"mt-6 text-xs opacity-70 leading-relaxed space-y-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"How it works:"})," words/phrases  ",i.jsx("span",{className:"font-semibold",children:"GPT-4 tokenizer"})," (BPE)  ",i.jsx("span",{className:"font-semibold",children:"token-based embeddings"}),"  cosine similarity  2D layout via ",i.jsx("span",{className:"font-semibold",children:r.toUpperCase()}),". Links show each point's top",d," neighbors by cosine."]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t border-white/10",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Why These Techniques Matter"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"UMAP:"})," Reveals semantic clusters & preserves local meaning relationships"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"PCA:"})," Shows dominant patterns & provides interpretable variance axes"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Alternative methods"})," like t-SNE, MDS, or Random Projection each reveal different aspects of meaning space"]})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:" Educational Value"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{children:" Compare how words cluster differently with each method"}),i.jsx("div",{children:" Understand trade-offs between speed vs. accuracy"}),i.jsx("div",{children:" Learn when linear vs. non-linear approaches work best"}),i.jsx("div",{children:" Explore how high-dimensional meaning gets compressed to 2D"}),i.jsx("div",{children:" Use the tokenizer to see how text becomes tokens before embeddings"})]})]})]})]})]}),O&&i.jsx(Jd,{onClose:()=>J(!1),neighbors:d})]})}xs.createRoot(document.getElementById("root")).render(i.jsx(Ds.StrictMode,{children:i.jsx(cu,{})}));
